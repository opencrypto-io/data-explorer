{"version":3,"sources":["index.js"],"names":["hideEmpty","webIds","metadata","currentPath","projectSchema","state","branches","id","url","window","location","hostname","push","local","currentBranch","models","wcol","wcolif","wcolmin","ocdx","loadOCD","opts","log","ocd","Client","dataUrl","getCounts","i","root","types","_","findKey","ico","out","keys","forEach","t","tc","length","count","map","o","m","style","class","alt","title","expandSubschema","val","expanded","indexOf","splice","progressError","msgs","path","weight","text","makePath","checkWeightIf","schema","calculateProgress","obj","w","type","ret","test","code","eval","items","arr","k","prog","concat","sum","properties","weights","progress","p","pd","Object","values","getLengthInBytes","str","b","match","githubIssueLink","value","encodeURI","dataItem","setPath","makeFooter","format","reduce","v","unsetPath","resolveWebId","href","replace","target","processItem","_size","JSON","stringify","pickBy","key","_logo","_logo_full","_counts","_progress","c","ic","ci","images","logo_square","data","logo_full","getType","fn","OCString","OCArray","OCNumber","OCBoolean","OCObject","zeroValue","cpath","media","binaryEncoding","src","moment","fromNow","slice","blockchain","lnk","platform","wrapper","patternProperties","$id","res","schemas","ledgers","assets","exchanges","clients","networks","markets","subschemaId","content","pid","oncreate","route","link","name","toFixed","max","onclick","withAttr","undefined","pdata","events","onmouseenter","onmouseleave","githubLinkCommit","commitId","githubLink","changeBranch","branch","find","query","redraw","loadLayoutData","schemaUrl","all","request","then","Layout","vnode","display","onchange","commit","total","commits_count","substring","time","children","originalData","projectData","sortBy","sortReverse","listModel","listModelAttr","modelData","defaultList","loadListData","model","collection","attrs","error","clone","ProjectList","runSort","reverse","updateSort","plural","placeholder","toLowerCase","oninput","searchList","filter","Boolean","RegExp","mid","detailLink","pi","split","par","dataView","dataObject","detailId","loadItem","subid","join","get","Project","switchSource","pathx","mod","trust","hljs","highlight","schemapath","jmespath","search","document","getElementById","render"],"mappings":"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","file":"src.b21400b4.map","sourceRoot":"../src","sourcesContent":["\nvar hideEmpty = true\nvar webIds = null\nvar metadata = null\nvar currentPath = null\nvar projectSchema = null\nvar state = {\n  expanded: []\n}\nvar branches = [\n  { id: 'master', url: 'https://data.opencrypto.io/data.json' },\n]\nif (window.location.hostname === 'localhost') {\n  branches.push({ id: 'local', url: '/data/data.json', local: true })\n}\nvar currentBranch = branches[1] || branches[0]\n\nconst models = {\n  project: {\n    id: 'project',\n    title: 'Project',\n    plural: 'Projects',\n    collection: 'projects',\n    root: null,\n    path: 'projects',\n    pathx: [ 'project' ],\n    schemapath: null\n  },\n  ledger: {\n    id: 'ledger',\n    title: 'Ledger',\n    plural: 'Ledgers',\n    collection: 'ledgers',\n    root: 'project',\n    path: 'projects[].ledgers[]',\n    pathx: [ 'project', 'ledger' ],\n    schemapath: 'properties.ledgers.items'\n  },\n  network: {\n    id: 'network',\n    title: 'Network',\n    plural: 'Networks',\n    collection: 'networks',\n    root: 'asset',\n    path: 'projects[].ledgers[].networks[]',\n    pathx: [ 'project', 'ledger', 'network' ],\n    schemapath: 'properties.ledgers.items.properties.networks.items'\n  },\n  asset: {\n    id: 'asset',\n    title: 'Asset',\n    plural: 'Assets',\n    collection: 'assets',\n    root: 'project',\n    path: 'projects[].assets[]',\n    pathx: [ 'project', 'asset' ],\n    schemapath: 'properties.assets.items'\n  },\n  client: {\n    id: 'client',\n    title: 'Client',\n    plural: 'Clients',\n    collection: 'clients',\n    root: 'project',\n    path: 'projects[].clients[]',\n    pathx: [ 'project', 'client' ],\n    schemapath: 'properties.clients.items'\n  },\n  exchange: {\n    id: 'exchange',\n    title: 'Exchange',\n    plural: 'Exchanges',\n    collection: 'exchanges',\n    root: 'project',\n    path: 'projects[].exchanges[]',\n    pathx: [ 'project', 'exchange' ],\n    schemapath: 'properties.exchanges.items'\n  }\n}\n\nconst wcol = 'opencrypto-weight'\nconst wcolif = 'opencrypto-weight-if'\nconst wcolmin = 'opencrypto-weight-min'\n\nvar ocdx = loadOCD(currentBranch)\n\nfunction loadOCD(opts = {}) {\n  console.log('Loading data pack from: %s', opts.url)\n  return new ocd.Client({ dataUrl: opts.url })\n}\n\nfunction getCounts(i, root = 'project') {\n  let types = []\n  const submods = _.findKey(models, { root })\n  switch (root) {\n    case 'project':\n      types = [\n        { id: 'ledgers', ico: 'database' },\n        { id: 'assets', ico: 'dollar-sign' },\n        { id: 'exchanges', ico: 'exchange-alt' },\n        { id: 'clients', ico: 'cog' },\n      ]\n      break\n    case 'ledger':\n      types = [\n        { id: 'networks', ico: 'plug' }\n      ]\n  }\n  let out = []\n  Object.keys(types).forEach((t) => {\n    const tc = types[t]\n    if (i[tc.id] && i[tc.id].length > 0) {\n      tc.count = i[tc.id].length\n      out.push(tc)\n    }\n  })\n  return out.map((o) => {\n    return m('div', { style: 'display:inline-block; padding-right: 1em;' }, [\n      m('i.fa', { class: 'fa-'+o.ico, style: 'color: grey', alt: o.id, title: o.id }),\n      m('span', { style: 'padding-left: 0.5em;' }, o.count)\n    ])\n  })\n}\n\nfunction expandSubschema (val) {\n  if (state.expanded.indexOf(val) !== -1) {\n    state.expanded.splice(state.expanded.indexOf(val), 1)\n    console.log('de-expanded: ', val, state.expanded)\n  } else {\n    state.expanded.push(val)\n    console.log('expanded: ', val, state.expanded)\n  }\n}\n\nfunction progressError(msgs, path, weight=1, text=undefined) {\n  msgs.push({\n    text,\n    path: makePath(path),\n    weight\n  })\n  return msgs\n}\n\nfunction checkWeightIf (schema) {\n}\n\nfunction calculateProgress (schema, obj, path=[], msgs=[], root=null) {\n  let w = 1\n  switch (schema.type) {\n    case 'string':\n    case 'number':\n    case 'boolean':\n      if (schema[wcol]) {\n        if (schema[wcolif]) {\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        w = (obj !== undefined && obj !== null && obj !== '') ? schema[wcol] : 0\n        if (w === 0) {\n          progressError(msgs, path, schema[wcol])\n        }\n      }\n      break\n    case 'array':\n      if (schema[wcol] && schema.items) {\n        if (((obj && obj.length == 0) || !obj) && schema[wcolmin] == 0) {\n          w = 1\n          break\n        }\n        if (schema[wcolif]) {\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        if (obj) {\n          let arr = obj.map((i, k) => {\n            const [ prog ] = calculateProgress(schema.items, i, path.concat([k]), msgs, root)\n            return prog\n          })\n          w = _.sum(arr) / (arr.length * schema[wcol])\n        } else {\n          progressError(msgs, path, schema[wcol])\n          w = 0\n        }\n      }\n      break\n    case 'object':\n      if (schema.properties) {\n        if (schema[wcol] && schema[wcolif]) {\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        let weights = {}\n        let progress = {}\n        Object.keys(schema.properties).forEach(p => {\n          let pd = schema.properties[p]\n          if (pd[wcol]) {\n            weights[p] = pd[wcol]\n            const [ prog ] = calculateProgress(pd, obj ? obj[p] : null, path.concat([p]), msgs, obj)\n            progress[p] = prog\n          }\n        })\n        if (Object.keys(weights).length > 0) {\n          w = _.sum(Object.values(progress)) / _.sum(Object.values(weights))\n        }\n        if (w === 0) {\n          progressError(msgs, path, schema[wcol])\n        }\n      }\n      break\n  }\n  return [ w, msgs ]\n}\n\nfunction getLengthInBytes(str) {\n  var b = str.match(/[^\\x00-\\xff]/g);\n  return (str.length + (!b ? 0: b.length)); \n}\n\nfunction githubIssueLink (path, value) {\n  const title = encodeURI(`(${dataItem.id}) ${makePath(path)}`)\n  const body = `Current value: \\`${value}\\``\n  return `https://github.com/opencrypto-io/data/issues/new?labels=bug&title=${title}&body=${body}`\n}\n\nfunction setPath (p) {\n  if (!p) {\n    return null\n  }\n  currentPath = p\n}\n\nfunction makeFooter (arr, schema) {\n  return makePath(arr) + ' <'+schema.type+(schema.format? ':' + schema.format : '')+'>'\n}\n\nfunction makePath (arr) {\n  return arr.reduce((out, v) => {\n    if (typeof v === 'number') {\n      return out + '['+v+']'\n    }\n    if (typeof v === 'string' && !v.match(/^[a-zA-Z0-9_]+$/)) {\n      return out + '[\\''+v+'\\']'\n    }\n    return out + '.' + v\n  })\n}\n\nfunction unsetPath () {\n  currentPath = null\n}\n\nfunction resolveWebId(val, type) {\n  if (type.match(/^custom\\//)) {\n    return m('a', { href: val }, val)\n  }\n  const wd = webIds[type]\n  if (!wd) {\n    return '#'\n  }\n  const href = webIds[type].url.replace('@id', val)\n  return m('a', { href, target: '_blank' }, val)\n}\n\nfunction processItem(i, type = 'project') {\n  i._size = getLengthInBytes(JSON.stringify(_.pickBy(i, (value, key) => {\n    return !key.match(/^_/)\n  })))\n  i._logo = null\n  i._logo_full = null\n  const [ progress, msgs ] = calculateProgress(projectSchema, i)\n  i._counts = getCounts(i, type)\n  i._progress = progress\n  const baseCols = [ '@', 'assets', 'exchanges', 'clients', 'apps', 'blockchains' ]\n  baseCols.forEach(c => {\n    if (i._logo) return null\n    let ic = i[c] \n    if (c === '@') {\n      ic = [i]\n    }\n    if (ic && ic.length > 0) {\n      ic.forEach(ci => {\n        if (i._logo || !ci.images) return null\n        if (ci.images.logo_square) {\n          i._logo = ci.images.logo_square.data\n        }\n        if (ci.images.logo_full) {\n          i._logo_full = ci.images.logo_full.data\n          if (!i._logo) {\n            i._logo = i._logo_full\n          }\n        } else if (ci.images.logo_square) {\n          i._logo_full = ci.images.logo_square.data\n        }\n      })\n    }\n  })\n  /*for(let n = 0; n <= 3; n++) {\n    var asset0 = i.assets[n]\n    if (!asset0) continue\n    if (asset0.images && asset0.images.logo_square) {\n      i._logo = asset0.images.logo_square.data\n      i._logo_full = i._logo\n    }\n    if (asset0.images && asset0.images.logo_full) {\n      i._logo_full = asset0.images.logo_full.data\n    }\n  }*/\n  return i\n}\n\nfunction getType (type) {\n  let fn = null\n  switch (type) {\n    case 'string':\n      fn = OCString\n      break\n    case 'array':\n      fn = OCArray\n      break\n    case 'number':\n      fn = OCNumber\n      break\n    case 'boolean':\n      fn = OCBoolean\n      break\n    case 'object':\n      fn = OCObject\n      break\n  }\n  return fn\n}\n\nfunction zeroValue() {\n  return m('span.grey', '(no value)')\n}\n\nfunction OCBoolean (schema, val) {\n  return val === true ? 'Yes' : (val === false ? 'No' : zeroValue())\n}\n\nfunction OCString (schema, val, path, root) {\n  if (val === undefined || val === null) {\n    return zeroValue()\n  }\n  let cpath = path[path.length-1]\n  if (schema.media && schema.media.binaryEncoding == 'base64') {\n    return m('div', [\n      m('img', { src: 'data:image/svg+xml;base64,' + val, style: 'max-height: 100px;' }) \n    ])\n  }\n  let out = val\n  if (schema.format === 'url') {\n    out = m('a', { href: val, target: '_blank' }, val)\n  }\n  else if (schema.format === 'date') {\n    out = `${val} (${moment(val).fromNow()})`\n  }\n  else if (schema.format == 'webid') {\n    out = resolveWebId(val, path.slice(-1)[0])\n  }\n  if (cpath === 'contract_address') {\n    if (root.blockchain === 'ethereum') {\n      out = m('a', { href: `https://etherscan.io/address/${val}`, target: '_blank' }, val)\n    }\n  }\n  else if (cpath === 'market_id') {\n    let lnk = null\n    switch (root.platform) {\n      case 'ios':\n        lnk = `http://itunes.apple.com/gb/app/${val}`\n        break\n      case 'android':\n        lnk = `https://play.google.com/store/apps/details?id=${val}`\n        break\n    }\n    if (lnk) {\n      out = m('a', { href: lnk, target: '_blank' }, val)\n    }\n  }\n  return m('div', [\n    out,\n    m('.control', m('a', { href: githubIssueLink(path, val) }, m('i.fas.fa-bug')))\n  ])\n}\n\nfunction OCNumber (schema, val) {\n  return val || zeroValue()\n}\n\nfunction OCArray (schema, val, path, root) {\n  if (!val || val.length === 0) {\n    return zeroValue()\n  }\n  let fn = getType(schema.items.type)\n  return val.map((i, c) => {\n    return fn ? fn(schema.items, i, path.concat([c]), root) : null\n  })\n}\n\nfunction OCObject(schema, values, path, root=null) {\n  let wrapper = (out) => out\n  if (schema.patternProperties) {\n    if (values) {\n      schema.properties = []\n      Object.keys(values).forEach(k => {\n        schema.properties[k] = { type: 'string', format: schema['opencrypto-validation'] }\n      })\n    } else {\n      return zeroValue()\n    }\n  }\n  if (!schema.properties) {\n    return m('div', 'bad object')\n  }\n  if (schema.$id && path.length > 0) {\n    wrapper = (res) => {\n      const match = schema.$id.match(/\\/models\\/([^#]+)#?$/)\n      if (!match) {\n        return res\n      }\n      const schemas = {\n        ledger: projectSchema.properties.ledgers.items,\n        asset: projectSchema.properties.assets.items,\n        exchange: projectSchema.properties.exchanges.items,\n        client: projectSchema.properties.clients.items,\n        network: projectSchema.properties.ledgers.items.properties.networks.items,\n        market: projectSchema.properties.exchanges.items.properties.markets.items,\n      }\n      const subschemaId = match[1]\n      const expanded = state.expanded.indexOf(`${match[1]}:${values.id}`) !== -1\n      if (!schemas[subschemaId]) {\n        console.log('not exists: %s', subschemaId)\n      }\n      const [ progress, msgs ] = calculateProgress(schemas[subschemaId], values)\n\n      const content = m('.box.subitem', [\n        m('nav.level', [\n          m('.level-left', [\n            m('.level-item', m('a', { href: `/${subschemaId}/${values.pid || values.id}`, oncreate: m.route.link }, m('b', values.name))),\n            m('.level-item', `[${values.id}]`),\n          ]),\n          m('.level-right', [\n            m('.level-item', [\n              getCounts(values, subschemaId),\n            ]),\n            m('.level-item', { style: 'color: black; width: 10em;' }, [\n              m('span', { style: 'padding-right: 1em; font-size: 0.9em;' }, (progress*100).toFixed(0) + '%'),\n              m('progress.progress.is-primary.is-small', { value: progress, max: 1 }, `${progress}%`) \n            ]),\n            m('.level-item', m('a', { onclick: m.withAttr('value', expandSubschema), value: `${subschemaId}:${values.id}` }, expanded ? 'Collapse' : 'Expand'))\n          ])\n        ]),\n        expanded ? m('div', res) : null\n      ])\n      return content\n    }\n  }\n  return wrapper(m('table.table', m('tbody', Object.keys(schema.properties).map(p => {\n    if (hideEmpty && (values[p] === undefined || values[p] === null)) {\n      return null\n    }\n    const pdata = schema.properties[p]\n    let cpath = path.concat([p])\n    let fn = getType(pdata.type)\n    let events = { 'data-path': makeFooter(cpath, pdata), onmouseenter: m.withAttr('data-path', setPath), onmouseleave: m.withAttr('data-path', unsetPath) }\n    return m('tr', events, [\n      m('th', pdata.title || p),\n      m('td', fn ? fn(pdata, values ? values[p] : null, cpath, values) : 'unknown type: '+pdata.type)\n    ])\n  }))))\n}\n\nfunction githubLinkCommit(commitId) {\n  return `https://github.com/opencrypto-io/data/commit/${commitId}`\n}\n\nfunction githubLink(id, type = 'blob') {\n  return `https://github.com/opencrypto-io/data/${type}/master/db/projects/${id}/project.yaml`\n}\n\nasync function changeBranch(branch) {\n  console.log('Switching branch: %s', branch)\n  console.log(branches, branch)\n  currentBranch = _.find(branches, { id: branch })\n  console.log(currentBranch)\n  ocdx = loadOCD(currentBranch)\n  // update list\n  listModelAttr = null\n  // update detail\n  detailId = null\n\n  // update webids & metadata\n  webids = await ocdx.query('webids')\n  metadata = await ocdx.query('metadata')\n\n  m.redraw()\n}\n\nfunction loadLayoutData () {\n  const schemaUrl = window.location.hostname === 'localhost' \n    ? 'http://localhost:1234/schema/deref/project.json'\n    : 'https://schema.opencrypto.io/build/deref/project.json'\n  Promise.all([\n    m.request(schemaUrl),\n    ocdx.query('webids'),\n    ocdx.query('metadata'),\n  ]).then(out => {\n    projectSchema = out[0]\n    webIds = out[1]\n    metadata = out[2]\n    m.redraw()\n  })\n}\n\nconst Layout = {\n  oninit () {\n    loadLayoutData()\n  },\n  view (vnode) {\n    return m('div', [\n      m('#toolsFooter', { style: { display: currentPath ? 'block' : 'none' }}, currentPath),\n      m('div', { 'style': 'padding-bottom: 5em;' },  [\n        m('nav#navbar.navbar', [\n          m('.container', [\n            m('.navbar-brand', [\n              m('a.navbar-item', { href: 'https://data.opencrypto.io/' }, [\n                m('#logo'),\n                m('#logo-text', [\n                  m('span.thin', 'Open'),\n                  'Crypto',\n                  m('span.green', 'Data'),\n                ])\n              ])\n            ]),\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('a.navbar-item', { href: 'https://data.opencrypto.io' }, 'Homepage'), \n                m('a.navbar-item.current', { href: 'https://explorer.opencrypto.io' }, 'Explorer'), \n                m('a.navbar-item', { href: 'https://schema.opencrypto.io' }, 'Schema'), \n              ]),\n              m('.navbar-end', [\n                m('a.navbar-item', { href: '#' }, 'How to contribute?'), \n                m('a.navbar-item', { href: '#' }, 'FAQ'), \n              ])\n            ])\n          ])\n        ]),\n        m('nav#subbar.navbar', [\n          m('.container', [\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('.navbar-item', m('label', 'Branch:')),\n                m('.navbar-item', [\n                  m('.select.is-rounded', [\n                    m('select', { onchange: m.withAttr('value', changeBranch) }, function () {\n                      return branches.map((b) => m('option', {\n                        selected: currentBranch.id === b.id, \n                        value: b.id \n                      }, b.local ? `[local] ${b.id}` : b.id))\n                    }())\n                  ])\n                ]),\n                m('.navbar-item', m('label', 'Commit:')),\n                m('.navbar-item', [\n                  m('.select.is-rounded', [\n                    m('select', [\n                      m('option', 'latest')\n                    ])\n                  ])\n                ])\n              ]),\n              m('.navbar-end', function() {\n                if (!metadata || !metadata.commit) {\n                  return null\n                }\n                let total = null\n                if (metadata.commits_count) {\n                  total = m('.navbar-item', [\n                    '(',\n                    m('a', { href: 'https://github.com/opencrypto-io/data/commits/master' }, '158 commits'),\n                    ')'\n                  ])\n                }\n                return [\n                  m('.navbar-item', [\n                    m('span', { style: 'padding-right: 10px;' }, 'Current commit'),\n                    m('a', { href: githubLinkCommit(metadata.commit) }, m('code', metadata.commit.substring(0,7))),\n                    m('span',{ style: 'padding-left: 10px;'}, '' + moment(metadata.time).fromNow())\n                  ]),\n                  total\n                ]\n              }())\n            ])\n          ])\n        ]),\n        m('.container', function() {\n          if (webIds && projectSchema) {\n            return m('#page', vnode.children)\n          }\n          return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n        }())\n      ])\n    ])\n  }\n}\n\nvar originalData = null\nvar projectData = null\nvar data = null\nvar sortBy = 'name'\nvar sortReverse = false\nvar listModel = null\nvar listModelAttr = null\nvar modelData = null\nvar defaultList = 'projects'\n\nfunction loadListData (vnode) {\n  let model = modelData = _.find(models, { collection: vnode.attrs.type || defaultList })\n  if (!modelData) {\n    console.error('no model: %s', model)\n  }\n\n  listModel = model\n  listModelAttr = model.collection\n  ocdx.query(modelData.path).then((res) => {\n    data = res.map(i => processItem(i, model.id))\n    originalData = _.clone(data)\n    m.redraw()\n  })\n}\n\nconst ProjectList = {\n  oninit (vnode) {\n    loadListData(vnode)\n    if (projectData === null) {\n      ocdx.query('projects').then((pd) => {\n        projectData = _.clone(pd)\n        m.redraw()\n      })\n    }\n  },\n  onupdate (vnode) {\n    if (listModelAttr !== (vnode.attrs.type || defaultList)) {\n      loadListData(vnode)\n    }\n  },\n  view () {\n    if (data === null || projectData === null) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n\n    function runSort() {\n      data = _.sortBy(data, sortBy)\n      if (sortReverse) {\n        data = data.reverse()\n      }\n    }\n    function updateSort(value) {\n      if (sortBy != value) {\n        sortBy = value\n      } else {\n        sortReverse = !sortReverse\n      }\n      runSort()\n    }\n\n    function searchList(value) {\n      data = _.clone(originalData)\n      if (!value) {\n        return null\n      }\n      data = data.filter((p) => {\n        return Boolean(p.name.match(new RegExp(value, 'gmi')))\n      })\n    }\n\n    runSort()\n\n    return m('div', [\n      m('nav.level.pageNavBar', [\n        m('.level-left', [\n          m('.level-item', [\n            m('h2.title.is-4', `${modelData.plural} (${originalData.length})`),\n          ]),\n          m('.level-item', [\n            m('input.searchInput', { placeholder: `Search ${modelData.plural.toLowerCase()} ..`, oninput: m.withAttr('value', searchList) }),\n          ])\n        ]),\n        m('.level-right', [\n          m('.level-item', m('.buttons.has-addons', Object.keys(models).map((mid) => {\n            const model = models[mid]\n            var classAttr = null\n            if (modelData.id === model.id) {\n              classAttr = 'is-selected is-info'\n            }\n            return m('span.level-item.button', { \n              href: `/${model.collection}`,\n              oncreate: m.route.link,\n              class: (modelData.id === model.id) ? 'is-selected is-warning' : ''\n            }, model.plural)\n          })))\n        ])\n      ]),\n      m('#projectList', [\n        m('table.table', [\n          m('thead', [\n            m('tr', [\n              modelData.id !== 'project' ? m('th', 'Project') : null,\n              m('th', ''),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: 'name' }, 'Name')),\n              m('th', 'Includes'),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_progress' }, 'Completeness')),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_size' }, 'Data size')),\n              m('th', 'GitHub'),\n              m('th', 'Link to Explorer'),\n            ])\n          ]),\n          m('tbody', function () {\n            return data.map(i => {\n              const detailLink = `/${modelData.id}/${i.pid || i.id}`\n              return m('tr', { key: i.id }, [\n                modelData.id !== 'project' ? \n                  m('td', function () {\n                    if (!i.pid) {\n                      return m('span', 'n/a')\n                    }\n                    const pi = i.pid.split(':')[0]\n                    const par = _.find(projectData, { id: pi })\n                    return m('a', { href: '/project/'+pi, oncreate: m.route.link }, par.name)\n                  }())\n                  : null,\n                m('td.data-logo', m('div', [\n                  i._logo ? m('img', { src: 'data:image/svg+xml;base64,' + i._logo }) : '',\n                ])),\n                m('td', m('a.projectTitle', { href: detailLink, oncreate: m.route.link }, i.name)),\n                m('td', i._counts),\n                m('td', m('div', [\n                  m('progress.progress.is-primary.is-small', { value: i._progress, max: 1 }, `${i._progress}%`) \n                ])),\n                m('td', (i._size/1000).toFixed(2) + ' KB'),\n                m('td', [\n                  m('a', { href: githubLink(i.id) }, 'Source'),\n                  ', ',\n                  m('a', { href: githubLink(i.id, 'edit') }, 'Edit'),\n                ]),\n                m('td', m('a', { href: detailLink, oncreate: m.route.link }, 'View →' )),\n              ])\n            })\n          }())\n        ])\n      ])\n    ])\n  }\n}\n\nvar dataItem = null\nvar dataView = 'explorer'\nvar dataObject = null\nvar detailId = null\n\nfunction loadItem (vnode) {\n  state.expanded = []\n  const type = vnode.attrs.type\n  let id = vnode.attrs.id \n  if (vnode.attrs.subid) {\n    id = [ id, vnode.attrs.subid ].join(':')\n  }\n  ocdx.get(type, id).then(res => {\n    dataItem = processItem(res, type)\n    detailId = [ vnode.attrs.type, vnode.attrs.id, vnode.attrs.subid ].join('-')  \n    m.redraw()\n  })\n}\n\nconst Project = {\n  oninit (vnode) {\n    loadItem(vnode)\n  },\n  onupdate (vnode) {\n    const id = [ vnode.attrs.type, vnode.attrs.id, vnode.attrs.subid ].join('-') \n    if (detailId !== id) {\n      loadItem(vnode)\n    }\n  },\n  view (vnode) {\n    if (!dataItem) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n    function switchSource (type) {\n      dataView = type\n    }\n    const p = dataItem\n    const model = models[vnode.attrs.type]\n\n    if (!model) {\n      console.log('Model not found: %s', vnode.attrs.type)\n      return null\n    }\n    \n    if (!model.pathx) {\n      model.pathx = ['project']\n    }\n\n    return m('div', [\n      m('nav.level.pageNavBar', [\n        m('.level-left', [\n          m('.level-item', [\n            m('h2.title.is-4', model.pathx.map((mid, i) => {\n              const mod = models[mid]\n              return [ \n                (i > 0) ? m('span', ' → ') : null,\n                '[',\n                m('a', { href: `/${mod.collection}`, oncreate: m.route.link }, mod.id),\n                '] ',\n                m('a', { href: `/${mod.id}/${(mod.pathx && p.pid) ? p.pid.split(':').slice(0,i+1).join(':') : p.id}`, oncreate: m.route.link }, (model.pathx.length > 1) ? (p.pid ? p.pid.split(':')[i] : p.id) : p.id)\n              ]\n            }))\n          ])\n        ])\n      ]),\n      m('#itemDetail', [\n        m('.level', [\n          m('.level-left', [\n            p._logo_full ? m('.navbar-item', m('.itemLogo', m('img', { src: 'data:image/svg+xml;base64,' + p._logo_full }))) : '',\n            m('.navbar-item', m('h3.title.is-4', p.name))\n          ]),\n          m('.level-right', [\n            m('.level-item', p._counts),\n            m('a.level-item', { href: githubLink(p.id, 'edit') }, [\n              m('i.fab.fa-github', { style: 'font-size: 1.3em; padding-right: 0.3em;' }),\n              'Edit on GitHub'\n            ]),\n            m('.level-item', [\n              m('.buttons.has-addons', [\n                m('span.button', { class: dataView === 'explorer' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'explorer' }, 'Explorer'),\n                m('span.button', { class: dataView === 'source' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'source' }, 'Source'),\n              ])\n            ])\n          ])\n        ]),\n        function () {\n          if (dataView === 'source') {\n            const src = JSON.stringify(p, null, 2)\n            return m('#itemSource', [\n              m('pre', m.trust(hljs.highlight('json', src).value))\n            ])\n          }\n          if (projectSchema === null) {\n            return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n          }\n          const schema = model.schemapath ? jmespath.search(projectSchema, model.schemapath) : projectSchema\n          dataObject = OCObject(schema, dataItem, [])\n          return m('#dataTable', dataObject)\n        }()\n      ]),\n    ])\n  }\n}\n\nconst root = document.getElementById('data-explorer')\nm.route(root, '/', {\n  '/': { render: () => m(Layout, m(ProjectList)) },\n  '/:type': { render: (vnode) => m(Layout, m(ProjectList, vnode.attrs)) },\n  '/:type/:id': { render: (vnode) => m(Layout, m(Project, vnode.attrs)) }\n})\n"]}