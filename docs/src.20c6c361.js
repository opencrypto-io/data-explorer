parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Focm":[function(require,module,exports) {
var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,o=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),hideEmpty=!0,webIds=null,currentPath=null,projectSchema=null,state={expanded:[]},models={project:{id:"project",title:"Project",plural:"Projects",collection:"projects",root:null,path:"projects",pathx:["project"],schemapath:null},ledger:{id:"ledger",title:"Ledger",plural:"Ledgers",collection:"ledgers",root:"project",path:"projects[].ledgers[]",pathx:["project","ledger"],schemapath:"properties.ledgers.items"},network:{id:"network",title:"Network",plural:"Networks",collection:"networks",root:"asset",path:"projects[].ledgers[].networks[]",pathx:["project","ledger","network"],schemapath:"properties.ledgers.items.properties.networks.items"},asset:{id:"asset",title:"Asset",plural:"Assets",collection:"assets",root:"project",path:"projects[].assets[]",pathx:["project","asset"],schemapath:"properties.assets.items"},client:{id:"client",title:"Client",plural:"Clients",collection:"clients",root:"project",path:"projects[].clients[]",pathx:["project","client"],schemapath:"properties.clients.items"},exchange:{id:"exchange",title:"Exchange",plural:"Exchanges",collection:"exchanges",root:"project",path:"projects[].exchanges[]",pathx:["project","exchange"],schemapath:"properties.exchanges.items"}},wcol="opencrypto-weight",wcolif="opencrypto-weight-if",wcolmin="opencrypto-weight-min",ocdx=new ocd.Client({dataUrl:schemaUrl="localhost"===window.location.hostname?"/data/data.json":"https://data.opencrypto.io/data.json"});function getCounts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"project",a=[];_.findKey(models,{root:t});switch(t){case"project":a=[{id:"ledgers",ico:"database"},{id:"assets",ico:"dollar-sign"},{id:"exchanges",ico:"exchange-alt"},{id:"clients",ico:"cog"}];break;case"ledger":a=[{id:"networks",ico:"plug"}]}var r=[];return Object.keys(a).forEach(function(t){var o=a[t];e[o.id]&&e[o.id].length>0&&(o.count=e[o.id].length,r.push(o))}),r.map(function(e){return m("div",{style:"display:inline-block; padding-right: 1em;"},[m("i.fa",{class:"fa-"+e.ico,style:"color: grey",alt:e.id,title:e.id}),m("span",{style:"padding-left: 0.5em;"},e.count)])})}function expandSubschema(e){-1!==state.expanded.indexOf(e)?(state.expanded.splice(state.expanded.indexOf(e),1),console.log("de-expanded: ",e,state.expanded)):(state.expanded.push(e),console.log("expanded: ",e,state.expanded))}function progressError(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return e.push({text:r,path:makePath(t),weight:a}),e}function checkWeightIf(e){}function calculateProgress(schema,obj){var path=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],msgs=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],root=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,w=1;switch(schema.type){case"string":case"number":case"boolean":if(schema[wcol]){if(schema[wcolif]){var ret=function test(code){return eval(code)}(schema[wcolif]);if(!ret){w=1;break}}w=null!=obj&&""!==obj?schema[wcol]:0,0===w&&progressError(msgs,path,schema[wcol])}break;case"array":if(schema[wcol]&&schema.items){if((obj&&0==obj.length||!obj)&&0==schema[wcolmin]){w=1;break}if(schema[wcolif]){var _ret=function test(code){return eval(code)}(schema[wcolif]);if(!_ret){w=1;break}}if(obj){var arr=obj.map(function(e,t){var a=calculateProgress(schema.items,e,path.concat([t]),msgs,root);return _slicedToArray(a,1)[0]});w=_.sum(arr)/(arr.length*schema[wcol])}else progressError(msgs,path,schema[wcol]),w=0}break;case"object":if(schema.properties){if(schema[wcol]&&schema[wcolif]){var _ret2=function test(code){return eval(code)}(schema[wcolif]);if(!_ret2){w=1;break}}var weights={},progress={};Object.keys(schema.properties).forEach(function(e){var t=schema.properties[e];if(t[wcol]){weights[e]=t[wcol];var a=calculateProgress(t,obj?obj[e]:null,path.concat([e]),msgs,obj),r=_slicedToArray(a,1)[0];progress[e]=r}}),Object.keys(weights).length>0&&(w=_.sum(Object.values(progress))/_.sum(Object.values(weights))),0===w&&progressError(msgs,path,schema[wcol])}}return[w,msgs]}function getLengthInBytes(e){var t=e.match(/[^\x00-\xff]/g);return e.length+(t?t.length:0)}function githubIssueLink(e,t){return"https://github.com/opencrypto-io/data/issues/new?labels=bug&title="+encodeURI("("+dataItem.id+") "+makePath(e))+"&body="+("Current value: `"+t+"`")}function setPath(e){if(!e)return null;currentPath=e}function makeFooter(e,t){return makePath(e)+" <"+t.type+(t.format?":"+t.format:"")+">"}function makePath(e){return e.reduce(function(e,t){return"number"==typeof t?e+"["+t+"]":"string"!=typeof t||t.match(/^[a-zA-Z0-9_]+$/)?e+"."+t:e+"['"+t+"']"})}function unsetPath(){currentPath=null}function resolveWebId(e,t){if(t.match(/^custom\//))return m("a",{href:e},e);if(!webIds[t])return"#";var a=webIds[t].url.replace("@id",e);return m("a",{href:a,target:"_blank"},e)}function processItem(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"project";e._size=getLengthInBytes(JSON.stringify(_.pickBy(e,function(e,t){return!t.match(/^_/)}))),e._logo=null,e._logo_full=null;var a=calculateProgress(projectSchema,e),r=_slicedToArray(a,2),o=r[0];r[1];e._counts=getCounts(e,t),e._progress=o;return["@","assets","exchanges","clients","apps","blockchains"].forEach(function(t){if(e._logo)return null;var a=e[t];"@"===t&&(a=[e]),a&&a.length>0&&a.forEach(function(t){if(e._logo||!t.images)return null;t.images.logo_square&&(e._logo=t.images.logo_square.data),t.images.logo_full?(e._logo_full=t.images.logo_full.data,e._logo||(e._logo=e._logo_full)):t.images.logo_square&&(e._logo_full=t.images.logo_square.data)})}),e}function getType(e){var t=null;switch(e){case"string":t=OCString;break;case"array":t=OCArray;break;case"number":t=OCNumber;break;case"boolean":t=OCBoolean;break;case"object":t=OCObject}return t}function zeroValue(){return m("span.grey","(no value)")}function OCBoolean(e,t){return!0===t?"Yes":!1===t?"No":zeroValue()}function OCString(e,t,a,r){if(null==t)return zeroValue();var o=a[a.length-1];if(e.media&&"base64"==e.media.binaryEncoding)return m("div",[m("img",{src:"data:image/svg+xml;base64,"+t,style:"max-height: 100px;"})]);var n=t;if("url"===e.format?n=m("a",{href:t,target:"_blank"},t):"date"===e.format?n=t+" ("+moment(t).fromNow()+")":"webid"==e.format&&(n=resolveWebId(t,a.slice(-1)[0])),"contract_address"===o)"ethereum"===r.blockchain&&(n=m("a",{href:"https://etherscan.io/address/"+t,target:"_blank"},t));else if("market_id"===o){var i=null;switch(r.platform){case"ios":i="http://itunes.apple.com/gb/app/"+t;break;case"android":i="https://play.google.com/store/apps/details?id="+t}i&&(n=m("a",{href:i,target:"_blank"},t))}return m("div",[n,m(".control",m("a",{href:githubIssueLink(a,t)},m("i.fas.fa-bug")))])}function OCNumber(e,t){return t||zeroValue()}function OCArray(e,t,a,r){if(!t||0===t.length)return zeroValue();var o=getType(e.items.type);return t.map(function(t,n){return o?o(e.items,t,a.concat([n]),r):null})}function OCObject(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=function(e){return e};if(e.patternProperties){if(!t)return zeroValue();e.properties=[],Object.keys(t).forEach(function(t){e.properties[t]={type:"string",format:e["opencrypto-validation"]}})}return e.properties?(e.$id&&a.length>0&&(r=function(a){var r=e.$id.match(/\/models\/([^#]+)#?$/);if(!r)return a;var o={ledger:projectSchema.properties.ledgers.items,asset:projectSchema.properties.assets.items,exchange:projectSchema.properties.exchanges.items,client:projectSchema.properties.clients.items,network:projectSchema.properties.ledgers.items.properties.networks.items,market:projectSchema.properties.exchanges.items.properties.markets.items},n=r[1],i=-1!==state.expanded.indexOf(r[1]+":"+t.id);o[n]||console.log("not exists: %s",n);var s=calculateProgress(o[n],t),l=_slicedToArray(s,2),c=l[0];l[1];return m(".box.subitem",[m("nav.level",[m(".level-left",[m(".level-item",m("a",{href:"/"+n+"/"+(t.pid||t.id),oncreate:m.route.link},m("b",t.name))),m(".level-item","["+t.id+"]")]),m(".level-right",[m(".level-item",[getCounts(t,n)]),m(".level-item",{style:"color: black; width: 10em;"},[m("span",{style:"padding-right: 1em; font-size: 0.9em;"},(100*c).toFixed(0)+"%"),m("progress.progress.is-primary.is-small",{value:c,max:1},c+"%")]),m(".level-item",m("a",{onclick:m.withAttr("value",expandSubschema),value:n+":"+t.id},i?"Collapse":"Expand"))])]),i?m("div",a):null])}),r(m("table.table",m("tbody",Object.keys(e.properties).map(function(r){if(hideEmpty&&(void 0===t[r]||null===t[r]))return null;var o=e.properties[r],n=a.concat([r]),i=getType(o.type),s={"data-path":makeFooter(n,o),onmouseenter:m.withAttr("data-path",setPath),onmouseleave:m.withAttr("data-path",unsetPath)};return m("tr",s,[m("th",o.title||r),m("td",i?i(o,t?t[r]:null,n,t):"unknown type: "+o.type)])}))))):m("div","bad object")}function githubLink(e){return"https://github.com/opencrypto-io/data/"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blob")+"/master/db/projects/"+e+"/project.yaml"}var Layout={oninit:function(){var e="localhost"===window.location.hostname?"http://localhost:1234/schema/deref/project.json":"https://schema.opencrypto.io/build/deref/project.json";Promise.all([ocdx.query("webids"),m.request(e)]).then(function(e){webIds=e[0],projectSchema=e[1],m.redraw()})},view:function(e){return m("div",[m("#toolsFooter",{style:{display:currentPath?"block":"none"}},currentPath),m("div",{style:"padding-bottom: 5em;"},[m("nav#navbar.navbar",[m(".container",[m(".navbar-brand",[m("a.navbar-item",{href:"https://data.opencrypto.io/"},[m("#logo"),m("#logo-text",[m("span.thin","Open"),"Crypto",m("span.green","Data")])])]),m(".navbar-menu",[m(".navbar-start",[m("a.navbar-item",{href:"https://data.opencrypto.io"},"Homepage"),m("a.navbar-item.current",{href:"https://explorer.opencrypto.io"},"Explorer"),m("a.navbar-item",{href:"https://schema.opencrypto.io"},"Schema")]),m(".navbar-end",[m("a.navbar-item",{href:"#"},"How to contribute?"),m("a.navbar-item",{href:"#"},"FAQ")])])])]),m(".container",webIds&&projectSchema?m("#page",e.children):m("div",{style:"padding: 2em;"},"Loading .."))])])}},originalData=null,projectData=null,data=null,sortBy="name",sortReverse=!1,listModel=null,listModelAttr=null,modelData=null,defaultList="projects";function loadListData(e){var t=modelData=_.find(models,{collection:e.attrs.type||defaultList});modelData||console.error("no model: %s",t),listModel=t,listModelAttr=t.collection,ocdx.query(modelData.path).then(function(e){data=e.map(function(e){return processItem(e,t.id)}),originalData=_.clone(data),m.redraw()})}var ProjectList={oninit:function(e){loadListData(e),null===projectData&&ocdx.query("projects").then(function(e){projectData=_.clone(e),m.redraw()})},onupdate:function(e){listModelAttr!==(e.attrs.type||defaultList)&&loadListData(e)},view:function(){if(null===data||null===projectData)return m("div",{style:"padding: 2em;"},"Loading ..");function e(){data=_.sortBy(data,sortBy),sortReverse&&(data=data.reverse())}function t(t){sortBy!=t?sortBy=t:sortReverse=!sortReverse,e()}return e(),m("div",[m("nav.level.pageNavBar",[m(".level-left",[m(".level-item",[m("h2.title.is-4",modelData.plural+" ("+originalData.length+")")]),m(".level-item",[m("input.searchInput",{placeholder:"Search "+modelData.plural.toLowerCase()+" ..",oninput:m.withAttr("value",function(e){if(data=_.clone(originalData),!e)return null;data=data.filter(function(t){return Boolean(t.name.match(new RegExp(e,"gmi")))})})})])]),m(".level-right",[m(".level-item",m(".buttons.has-addons",Object.keys(models).map(function(e){var t=models[e];return modelData.id===t.id&&"is-selected is-info",m("span.level-item.button",{href:"/"+t.collection,oncreate:m.route.link,class:modelData.id===t.id?"is-selected is-warning":""},t.plural)})))])]),m("#projectList",[m("table.table",[m("thead",[m("tr",["project"!==modelData.id?m("th","Project"):null,m("th",""),m("th",m("a",{onclick:m.withAttr("value",t),value:"name"},"Name")),m("th","Includes"),m("th",m("a",{onclick:m.withAttr("value",t),value:"_progress"},"Completeness")),m("th",m("a",{onclick:m.withAttr("value",t),value:"_size"},"Data size")),m("th","GitHub"),m("th","Link to Explorer")])]),m("tbody",data.map(function(e){var t="/"+modelData.id+"/"+(e.pid||e.id);return m("tr",{key:e.id},["project"!==modelData.id?m("td",function(){if(!e.pid)return m("span","n/a");var t=e.pid.split(":")[0],a=_.find(projectData,{id:t});return m("a",{href:"/project/"+t,oncreate:m.route.link},a.name)}()):null,m("td.data-logo",m("div",[e._logo?m("img",{src:"data:image/svg+xml;base64,"+e._logo}):""])),m("td",m("a.projectTitle",{href:t,oncreate:m.route.link},e.name)),m("td",e._counts),m("td",m("div",[m("progress.progress.is-primary.is-small",{value:e._progress,max:1},e._progress+"%")])),m("td",(e._size/1e3).toFixed(2)+" KB"),m("td",[m("a",{href:githubLink(e.id)},"Source"),", ",m("a",{href:githubLink(e.id,"edit")},"Edit")]),m("td",m("a",{href:t,oncreate:m.route.link},"View →"))])}))])])])}},dataItem=null,dataView="explorer",dataObject=null,detailId=null;function loadItem(e){state.expanded=[];var t=e.attrs.type,a=e.attrs.id;e.attrs.subid&&(a=[a,e.attrs.subid].join(":")),ocdx.get(t,a).then(function(a){dataItem=processItem(a,t),detailId=[e.attrs.type,e.attrs.id,e.attrs.subid].join("-"),m.redraw()})}var Project={oninit:function(e){loadItem(e)},onupdate:function(e){var t=[e.attrs.type,e.attrs.id,e.attrs.subid].join("-");detailId!==t&&loadItem(e)},view:function(e){if(!dataItem)return m("div",{style:"padding: 2em;"},"Loading ..");function t(e){dataView=e}var a=dataItem,r=models[e.attrs.type];return r?(r.pathx||(r.pathx=["project"]),m("div",[m("nav.level.pageNavBar",[m(".level-left",[m(".level-item",[m("h2.title.is-4",r.pathx.map(function(e,t){var o=models[e];return[t>0?m("span"," → "):null,"[",m("a",{href:"/"+o.collection,oncreate:m.route.link},o.id),"] ",m("a",{href:"/"+o.id+"/"+(o.pathx&&a.pid?a.pid.split(":").slice(0,t+1).join(":"):a.id),oncreate:m.route.link},r.pathx.length>1&&a.pid?a.pid.split(":")[t]:a.id)]}))])])]),m("#itemDetail",[m(".level",[m(".level-left",[a._logo_full?m(".navbar-item",m(".itemLogo",m("img",{src:"data:image/svg+xml;base64,"+a._logo_full}))):"",m(".navbar-item",m("h3.title.is-4",a.name))]),m(".level-right",[m(".level-item",a._counts),m("a.level-item",{href:githubLink(a.id,"edit")},[m("i.fab.fa-github",{style:"font-size: 1.3em; padding-right: 0.3em;"}),"Edit on GitHub"]),m(".level-item",[m(".buttons.has-addons",[m("span.button",{class:"explorer"===dataView?"is-success is-selected":"",onclick:m.withAttr("value",t),value:"explorer"},"Explorer"),m("span.button",{class:"source"===dataView?"is-success is-selected":"",onclick:m.withAttr("value",t),value:"source"},"Source")])])])]),function(){if("source"===dataView){var e=JSON.stringify(a,null,2);return m("#itemSource",[m("pre",m.trust(hljs.highlight("json",e).value))])}if(null===projectSchema)return m("div",{style:"padding: 2em;"},"Loading ..");var t=r.schemapath?jmespath.search(projectSchema,r.schemapath):projectSchema;return dataObject=OCObject(t,dataItem,[]),m("#dataTable",dataObject)}()])])):(console.log("Model not found: %s",e.attrs.type),null)}},root=document.getElementById("data-explorer");m.route(root,"/",{"/":{render:function(){return m(Layout,m(ProjectList))}},"/:type":{render:function(e){return m(Layout,m(ProjectList,e.attrs))}},"/:type/:id":{render:function(e){return m(Layout,m(Project,e.attrs))}}});
},{}]},{},["Focm"], null)
//# sourceMappingURL=/src.20c6c361.map