parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Focm":[function(require,module,exports) {
var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,o=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),hideEmpty=!0,webIds=null,path=null,projectSchema=null,wcol="opencrypto-weight",wcolif="opencrypto-weight-if";function fixSchema(e){return e}function progressError(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return e.push({text:r,path:makePath(t),weight:a}),e}function checkWeightIf(e){}function calculateProgress(schema,obj){var path=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],msgs=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],root=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,w=1;switch(schema.type){case"string":case"number":case"boolean":if(schema[wcol]){if(schema[wcolif]){console.log('exception: %s, eval="%s"',makePath(path),schema[wcolif]);var ret=function test(code){return eval(code)}(schema[wcolif]);if(!ret){w=1;break}}w=null!=obj&&""!==obj?schema[wcol]:0,0===w&&progressError(msgs,path,schema[wcol])}break;case"array":if(schema[wcol]&&schema.items){if(schema[wcolif]){console.log('exception: %s, eval="%s"',makePath(path),schema[wcolif]);var _ret=function test(code){return eval(code)}(schema[wcolif]);if(!_ret){w=1;break}}if(obj){var arr=obj.map(function(e,t){var a=calculateProgress(schema.items,e,path.concat([t]),msgs,root);return _slicedToArray(a,1)[0]});w=_.sum(arr)/(arr.length*schema[wcol])}else progressError(msgs,path,schema[wcol]),w=0}break;case"object":if(schema.properties){if(schema[wcol]&&schema[wcolif]){console.log('exception: %s, eval="%s"',makePath(path),schema[wcolif]);var _ret2=function test(code){return eval(code)}(schema[wcolif]);if(!_ret2){w=1;break}}var weights={},progress={};Object.keys(schema.properties).forEach(function(e){var t=schema.properties[e];if(t[wcol]){weights[e]=t[wcol];var a=calculateProgress(t,obj[e]||"",path.concat([e]),msgs,obj),r=_slicedToArray(a,1)[0];progress[e]=r}}),Object.keys(weights).length>0&&(w=_.sum(Object.values(progress))/_.sum(Object.values(weights))),0===w&&progressError(msgs,path,schema[wcol])}}return[w,msgs]}function getLengthInBytes(e){var t=e.match(/[^\x00-\xff]/g);return e.length+(t?t.length:0)}function githubIssueLink(e,t){return"https://github.com/opencrypto-io/data/issues/new?labels=bug&title="+encodeURI("("+dataItem.id+") "+makePath(e))+"&body="+("Current value: `"+t+"`")}function setPath(e){if(!e)return null;path=e}function makeFooter(e,t){return makePath(e)+" <"+t.type+(t.format?":"+t.format:"")+">"}function makePath(e){return e.reduce(function(e,t){return"number"==typeof t?e+"["+t+"]":"string"!=typeof t||t.match(/^[a-zA-Z0-9_]+$/)?e+"."+t:e+"['"+t+"']"})}function unsetPath(){path=null}function resolveWebId(e,t){if(t.match(/^custom\//))return m("a",{href:e},e);if(!webIds[t])return"#";var a=webIds[t].url.replace("@id",e);return m("a",{href:a,target:"_blank"},e)}function processItem(e){e._size=getLengthInBytes(JSON.stringify(e)),e._logo=null,e._logo_full=null;var t,a,r=calculateProgress(projectSchema,e),o=_slicedToArray(r,2),n=o[0];o[1];e._counts=(t=[{id:"assets",ico:"database"},{id:"networks",ico:"plug"},{id:"clients",ico:"cog"},{id:"exchanges",ico:"exchange-alt"}],a=[],Object.keys(t).forEach(function(r){var o=t[r];e[o.id]&&e[o.id].length>0&&(o.count=e[o.id].length,a.push(o))}),a.map(function(e){return m("div",{style:"display:inline-block; padding-right: 1em;"},[m("i.fa",{class:"fa-"+e.ico,style:"color: grey",alt:e.id,title:e.id}),m("span",{style:"padding-left: 0.5em;"},e.count)])})),e._progress=n;for(var i=0;i<=3;i++){var s=e.assets[i];e._logo||s&&(s.images&&s.images.logo_square&&(e._logo=s.images.logo_square.data,e._logo_full=e._logo),s.images&&s.images.logo_full&&(e._logo_full=s.images.logo_full.data))}return e}function getType(e){var t=null;switch(e){case"string":t=OCString;break;case"array":t=OCArray;break;case"number":t=OCNumber;break;case"boolean":t=OCBoolean;break;case"object":t=OCObject}return t}function zeroValue(){return m("span.grey","(no value)")}function OCBoolean(e,t){return!0===t?"Yes":!1===t?"No":zeroValue()}function OCString(e,t,a){if(!t)return zeroValue();if(e.media&&"base64"==e.media.binaryEncoding)return m("div",[m("img",{src:"data:image/svg+xml;base64,"+t,style:"max-height: 100px;"})]);var r=t;return"url"===e.format?r=m("a",{href:t,target:"_blank"},t):"date"===e.format?r=t+" ("+moment(t).fromNow()+")":"webid"==e.format&&(r=resolveWebId(t,a.slice(-1)[0])),m("div",[r,m(".control",m("a",{href:githubIssueLink(a,t)},m("i.fas.fa-bug")))])}function OCNumber(e,t){return t||zeroValue()}function OCArray(e,t,a){if(!t||0===t.length)return zeroValue();var r=getType(e.items.type);return t.map(function(t,o){return r?r(e.items,t,a.concat([o])):null})}function OCObject(e,t,a){if(e.patternProperties){if(!t)return zeroValue();e.properties=[],Object.keys(t).forEach(function(t){e.properties[t]={type:"string",format:e["opencrypto-validation"]}})}return e.properties?m("table.table",m("tbody",Object.keys(e.properties).map(function(r){if(hideEmpty&&!t[r])return null;var o=e.properties[r],n=a.concat([r]),i=getType(o.type),s={"data-path":makeFooter(n,o),onmouseenter:m.withAttr("data-path",setPath),onmouseleave:m.withAttr("data-path",unsetPath)};return m("tr",s,[m("th",o.title||r),m("td",i?i(o,t?t[r]:null,n):"unknown type: "+o.type)])}))):m("div","bad object")}function githubLink(e){return"https://github.com/opencrypto-io/data/"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blob")+"/master/db/projects/"+e+"/project.yaml"}var Layout={oninit:function(){var e="localhost"===window.location.hostname?"http://localhost:1234/schema/deref/project.json":"https://schema.opencrypto.io/build/deref/project.json";Promise.all([ocd.query("webids"),m.request(e)]).then(function(e){webIds=e[0],projectSchema=fixSchema(e[1]),m.redraw()})},view:function(e){return m("div",[path?m("#toolsFooter",path):"",m("div",{style:"padding-bottom: 5em;"},[m("nav#navbar.navbar",[m(".container",[m(".navbar-brand",[m("a.navbar-item",{href:"https://data.opencrypto.io/"},[m("#logo"),m("#logo-text",[m("span.thin","Open"),"Crypto",m("span.green","Data")])])]),m(".navbar-menu",[m(".navbar-start",[m("a.navbar-item",{href:"https://data.opencrypto.io"},"Homepage"),m("a.navbar-item.current",{href:"https://explorer.opencrypto.io"},"Explorer"),m("a.navbar-item",{href:"https://schema.opencrypto.io"},"Schema")]),m(".navbar-end",[m("a.navbar-item",{href:"#"},"How to contribute?"),m("a.navbar-item",{href:"#"},"FAQ")])])])]),m(".container",webIds&&projectSchema?m("#page",e.children):m("div",{style:"padding: 2em;"},"Loading .."))])])}},originalData=null,data=null,sortBy="name",sortReverse=!1,ProjectList={oninit:function(){ocd.query("projects").then(function(e){data=e.map(function(e){return processItem(e)}),originalData=_.clone(data),m.redraw()})},view:function(){if(null===data)return m("div",{style:"padding: 2em;"},"Loading ..");function e(){data=_.sortBy(data,sortBy),sortReverse&&(data=data.reverse())}function t(t){sortBy!=t?sortBy=t:sortReverse=!sortReverse,e()}return e(),m("div",[m(".navbar.transparent.pageNavBar",[m(".navbar-menu",[m(".navbar-start",[m(".navbar-item",[m("h2.title.is-4","Projects ("+originalData.length+")")]),m(".navbar-item",[m("input.searchInput",{placeholder:"Search projects ..",oninput:m.withAttr("value",function(e){if(data=_.clone(originalData),!e)return null;data=data.filter(function(t){return Boolean(t.name.match(new RegExp(e,"gmi")))})})})])])])]),m("#projectList",[m("table.table",[m("thead",[m("tr",[m("th",""),m("th",m("a",{onclick:m.withAttr("value",t),value:"name"},"Name")),m("th","Includes"),m("th",m("a",{onclick:m.withAttr("value",t),value:"_progress"},"Completeness")),m("th",m("a",{onclick:m.withAttr("value",t),value:"_size"},"Data size")),m("th","GitHub"),m("th","Link to Explorer")])]),m("tbody",data.map(function(e){return m("tr",{key:e.id},[m("td.data-logo",m("div",[e._logo?m("img",{src:"data:image/svg+xml;base64,"+e._logo}):""])),m("td",m("a.projectTitle",{href:"/project/"+e.id,oncreate:m.route.link},e.name)),m("td",e._counts),m("td",m("div",[m("progress.progress.is-primary.is-small",{value:e._progress,max:1},e._progress+"%")])),m("td",(e._size/1e3).toFixed(2)+" KB"),m("td",[m("a",{href:githubLink(e.id)},"Source"),", ",m("a",{href:githubLink(e.id,"edit")},"Edit")]),m("td",m("a",{href:"/project/"+e.id,oncreate:m.route.link},"View â†’"))])}))])])])}},dataItem=null,dataView="explorer",Project={oninit:function(e){ocd.get("project",e.attrs.id).then(function(e){dataItem=processItem(e),m.redraw()})},view:function(e){if(!dataItem)return m("div",{style:"padding: 2em;"},"Loading ..");function t(e){console.log(e),dataView=e}var a=dataItem;return m("div",[m(".navbar.transparent.pageNavBar",[m(".navbar-menu",[m(".navbar-start",[m(".navbar-item",[m("h2.title.is-4",[m("a",{href:"/",oncreate:m.route.link},"Projects")," / ",m("span",a.name)])])])])]),m("#itemDetail",[m(".navbar.transparent",[m(".navbar-menu",[m(".navbar-start",[a._logo_full?m(".navbar-item",m(".itemLogo",m("img",{src:"data:image/svg+xml;base64,"+a._logo_full}))):"",m(".navbar-item",m("h3.title.is-4",a.name))]),m(".navbar-end",[m("a.navbar-item",{href:githubLink(a.id,"edit")},[m("i.fab.fa-github",{style:"font-size: 1.3em; padding-right: 0.3em;"}),"Edit on GitHub"]),m(".navbar-item",[m(".buttons.has-addons",[m("span.button",{class:"explorer"===dataView?"is-success is-selected":"",onclick:m.withAttr("value",t),value:"explorer"},"Explorer"),m("span.button",{class:"source"===dataView?"is-success is-selected":"",onclick:m.withAttr("value",t),value:"source"},"Source")])])])])]),function(){if("source"===dataView){var e=JSON.stringify(a,null,2);return m("#itemSource",[m("pre",m.trust(hljs.highlight("json",e).value))])}return null===projectSchema?m("div",{style:"padding: 2em;"},"Loading .."):m("#dataTable",OCObject(projectSchema,a,[]))}()])])}},root=document.getElementById("data-explorer");m.route(root,"/",{"/":{render:function(){return m(Layout,m(ProjectList))}},"/project/:id":{render:function(e){return m(Layout,m(Project,e.attrs))}}});
},{}]},{},["Focm"], null)
//# sourceMappingURL=/src.ad89fe9b.map