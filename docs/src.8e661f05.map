{"version":3,"sources":["index.js"],"names":["hideEmpty","webIds","metadata","currentPath","projectSchema","state","branches","id","url","localBranch","window","location","hostname","push","local","currentBranch","models","wcol","wcolif","wcolmin","loadOCD","opts","log","ocd","Client","dataUrl","getCounts","i","root","types","_","findKey","ico","out","keys","forEach","t","tc","length","count","map","o","m","style","class","alt","title","expandSubschema","val","expanded","indexOf","splice","progressError","msgs","path","weight","text","makePath","checkWeightIf","schema","calculateProgress","obj","w","type","ret","test","code","eval","items","arr","k","prog","concat","sum","properties","weights","progress","p","pd","Object","values","getLengthInBytes","str","b","match","githubIssueLink","value","encodeURI","dataItem","setPath","makeFooter","format","reduce","v","unsetPath","resolveWebId","href","replace","target","processItem","_size","JSON","stringify","pickBy","key","_logo","_logo_full","_logo_type","_logo_full_type","_counts","_progress","c","ic","ci","images","logo_square","data","logo_full","getType","fn","OCString","OCArray","OCNumber","OCBoolean","OCObject","zeroValue","getBase64Image","cpath","media","binaryEncoding","src","moment","fromNow","slice","blockchain","lnk","platform","wrapper","patternProperties","$id","res","schemas","ledgers","assets","exchanges","clients","networks","markets","subschemaId","content","pid","oncreate","route","linkTop","name","toFixed","max","onclick","withAttr","undefined","pdata","events","onmouseenter","onmouseleave","githubLinkCommit","commitId","githubLink","changeBranch","branch","find","ocdx","query","redraw","loadLayoutData","schemaUrl","all","request","then","Layout","vnode","display","onchange","commit","total","commits_count","substring","time","children","originalData","projectData","sortBy","sortReverse","listModel","listModelAttr","modelData","defaultList","loadListData","model","collection","attrs","error","clone","ProjectList","runSort","reverse","updateSort","plural","placeholder","toLowerCase","oninput","searchList","filter","Boolean","RegExp","mid","detailLink","pi","split","par","dataView","dataObject","detailId","loadItem","subid","join","get","Project","switchSource","pathx","mod","trust","hljs","highlight","schemapath","jmespath","search","link","apply","arguments","mount","document","createDocumentFragment","getElementById","render"],"mappings":"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","file":"src.8e661f05.map","sourceRoot":"../src","sourcesContent":["\nvar hideEmpty = true\nvar webIds = null\nvar metadata = null\nvar currentPath = null\nvar projectSchema = null\nvar state = {\n  expanded: []\n}\nvar branches = [\n  { id: 'master', url: 'https://data.opencrypto.io/data.json' },\n]\nvar localBranch = null\nif (window.location.hostname === 'localhost') {\n  branches.push({ id: 'local', url: '/data/dist/data.json', local: true })\n}\nvar currentBranch = branches[1] || branches[0]\n\nconst models = {\n  project: {\n    id: 'project',\n    title: 'Project',\n    plural: 'Projects',\n    collection: 'projects',\n    root: null,\n    path: 'projects',\n    pathx: [ 'project' ],\n    schemapath: null\n  },\n  ledger: {\n    id: 'ledger',\n    title: 'Ledger',\n    plural: 'Ledgers',\n    collection: 'ledgers',\n    root: 'project',\n    path: 'projects[].ledgers[]',\n    pathx: [ 'project', 'ledger' ],\n    schemapath: 'properties.ledgers.items'\n  },\n  network: {\n    id: 'network',\n    title: 'Network',\n    plural: 'Networks',\n    collection: 'networks',\n    root: 'asset',\n    path: 'projects[].ledgers[].networks[]',\n    pathx: [ 'project', 'ledger', 'network' ],\n    schemapath: 'properties.ledgers.items.properties.networks.items'\n  },\n  asset: {\n    id: 'asset',\n    title: 'Asset',\n    plural: 'Assets',\n    collection: 'assets',\n    root: 'project',\n    path: 'projects[].assets[]',\n    pathx: [ 'project', 'asset' ],\n    schemapath: 'properties.assets.items'\n  },\n  client: {\n    id: 'client',\n    title: 'Client',\n    plural: 'Clients',\n    collection: 'clients',\n    root: 'project',\n    path: 'projects[].clients[]',\n    pathx: [ 'project', 'client' ],\n    schemapath: 'properties.clients.items'\n  },\n  exchange: {\n    id: 'exchange',\n    title: 'Exchange',\n    plural: 'Exchanges',\n    collection: 'exchanges',\n    root: 'project',\n    path: 'projects[].exchanges[]',\n    pathx: [ 'project', 'exchange' ],\n    schemapath: 'properties.exchanges.items'\n  }\n}\n\nconst wcol = 'opencrypto-weight'\nconst wcolif = 'opencrypto-weight-if'\nconst wcolmin = 'opencrypto-weight-min'\n\n// load basic OCD\nchangeBranch(currentBranch.id)\n\nfunction loadOCD(opts = {}) {\n  console.log('Loading data pack from: %s', opts.url)\n  return new ocd.Client({ dataUrl: opts.url })\n}\n\nfunction getCounts(i, root = 'project') {\n  let types = []\n  const submods = _.findKey(models, { root })\n  switch (root) {\n    case 'project':\n      types = [\n        { id: 'ledgers', ico: 'database' },\n        { id: 'assets', ico: 'dollar-sign' },\n        { id: 'exchanges', ico: 'exchange-alt' },\n        { id: 'clients', ico: 'cog' },\n      ]\n      break\n    case 'ledger':\n      types = [\n        { id: 'networks', ico: 'plug' }\n      ]\n  }\n  let out = []\n  Object.keys(types).forEach((t) => {\n    const tc = types[t]\n    if (i[tc.id] && i[tc.id].length > 0) {\n      tc.count = i[tc.id].length\n      out.push(tc)\n    }\n  })\n  return out.map((o) => {\n    return m('div', { style: 'display:inline-block; padding-right: 1em;' }, [\n      m('i.fa', { class: 'fa-'+o.ico, style: 'color: grey', alt: o.id, title: o.id }),\n      m('span', { style: 'padding-left: 0.5em;' }, o.count)\n    ])\n  })\n}\n\nfunction expandSubschema (val) {\n  if (state.expanded.indexOf(val) !== -1) {\n    state.expanded.splice(state.expanded.indexOf(val), 1)\n    console.log('de-expanded: ', val, state.expanded)\n  } else {\n    state.expanded.push(val)\n    console.log('expanded: ', val, state.expanded)\n  }\n}\n\nfunction progressError(msgs, path, weight=1, text=undefined) {\n  msgs.push({\n    text,\n    path: makePath(path),\n    weight\n  })\n  return msgs\n}\n\nfunction checkWeightIf (schema) {\n}\n\nfunction calculateProgress (schema, obj, path=[], msgs=[], root=null) {\n  let w = 1\n  switch (schema.type) {\n    case 'string':\n    case 'number':\n    case 'boolean':\n      if (schema[wcol]) {\n        if (schema[wcolif]) {\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        w = (obj !== undefined && obj !== null && obj !== '') ? schema[wcol] : 0\n        if (w === 0) {\n          progressError(msgs, path, schema[wcol])\n        }\n      }\n      break\n    case 'array':\n      if (schema[wcol] && schema.items) {\n        if (((obj && obj.length == 0) || !obj) && schema[wcolmin] == 0) {\n          w = 1\n          break\n        }\n        if (schema[wcolif]) {\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        if (obj) {\n          let arr = obj.map((i, k) => {\n            const [ prog ] = calculateProgress(schema.items, i, path.concat([k]), msgs, root)\n            return prog\n          })\n          w = _.sum(arr) / (arr.length * schema[wcol])\n        } else {\n          progressError(msgs, path, schema[wcol])\n          w = 0\n        }\n      }\n      break\n    case 'object':\n      if (schema.properties) {\n        if (schema[wcol] && schema[wcolif]) {\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        let weights = {}\n        let progress = {}\n        Object.keys(schema.properties).forEach(p => {\n          let pd = schema.properties[p]\n          if (pd[wcol]) {\n            weights[p] = pd[wcol]\n            const [ prog ] = calculateProgress(pd, obj ? obj[p] : null, path.concat([p]), msgs, obj)\n            progress[p] = prog\n          }\n        })\n        if (Object.keys(weights).length > 0) {\n          w = _.sum(Object.values(progress)) / _.sum(Object.values(weights))\n        }\n        if (w === 0) {\n          progressError(msgs, path, schema[wcol])\n        }\n      }\n      break\n  }\n  return [ w, msgs ]\n}\n\nfunction getLengthInBytes(str) {\n  var b = str.match(/[^\\x00-\\xff]/g);\n  return (str.length + (!b ? 0: b.length)); \n}\n\nfunction githubIssueLink (path, value) {\n  const title = encodeURI(`(${dataItem.id}) ${makePath(path)}`)\n  const body = `Current value: \\`${value}\\``\n  return `https://github.com/opencrypto-io/data/issues/new?labels=bug&title=${title}&body=${body}`\n}\n\nfunction setPath (p) {\n  if (!p) {\n    return null\n  }\n  currentPath = p\n}\n\nfunction makeFooter (arr, schema) {\n  return makePath(arr) + ' <'+schema.type+(schema.format? ':' + schema.format : '')+'>'\n}\n\nfunction makePath (arr) {\n  return arr.reduce((out, v) => {\n    if (typeof v === 'number') {\n      return out + '['+v+']'\n    }\n    if (typeof v === 'string' && !v.match(/^[a-zA-Z0-9_]+$/)) {\n      return out + '[\\''+v+'\\']'\n    }\n    return out + '.' + v\n  })\n}\n\nfunction unsetPath () {\n  currentPath = null\n}\n\nfunction resolveWebId(val, type) {\n  if (type.match(/^custom\\//)) {\n    return m('a', { href: val }, val)\n  }\n  const wd = webIds[type]\n  if (!wd) {\n    return '#'\n  }\n  const href = webIds[type].url.replace('@id', val)\n  return m('a', { href, target: '_blank' }, val)\n}\n\nfunction processItem(i, type = 'project') {\n  i._size = getLengthInBytes(JSON.stringify(_.pickBy(i, (value, key) => {\n    return !key.match(/^_/)\n  })))\n  i._logo = null\n  i._logo_full = null\n  i._logo_type = null\n  i._logo_full_type = null\n\n  const [ progress, msgs ] = calculateProgress(projectSchema, i)\n  i._counts = getCounts(i, type)\n  i._progress = progress\n  const baseCols = [ '@', 'assets', 'exchanges', 'clients', 'apps', 'blockchains' ]\n  baseCols.forEach(c => {\n    if (i._logo) return null\n    let ic = i[c] \n    if (c === '@') {\n      ic = [i]\n    }\n    if (ic && ic.length > 0) {\n      ic.forEach(ci => {\n        if (i._logo || !ci.images) return null\n        if (ci.images.logo_square) {\n          i._logo = ci.images.logo_square.data\n          i._logo_type = ci.images.logo_square.type\n        }\n        if (ci.images.logo_full) {\n          i._logo_full = ci.images.logo_full.data\n          i._logo_full_type = ci.images.logo_full.type\n          if (!i._logo) {\n            i._logo = i._logo_full\n            i._logo_type = i._logo_full_type\n          }\n        } else if (ci.images.logo_square) {\n          i._logo_full = ci.images.logo_square.data\n          i._logo_full_type = ci.images.logo_square.type\n        }\n      })\n    }\n  })\n  /*for(let n = 0; n <= 3; n++) {\n    var asset0 = i.assets[n]\n    if (!asset0) continue\n    if (asset0.images && asset0.images.logo_square) {\n      i._logo = asset0.images.logo_square.data\n      i._logo_full = i._logo\n    }\n    if (asset0.images && asset0.images.logo_full) {\n      i._logo_full = asset0.images.logo_full.data\n    }\n  }*/\n  return i\n}\n\nfunction getType (type) {\n  let fn = null\n  switch (type) {\n    case 'string':\n      fn = OCString\n      break\n    case 'array':\n      fn = OCArray\n      break\n    case 'number':\n      fn = OCNumber\n      break\n    case 'boolean':\n      fn = OCBoolean\n      break\n    case 'object':\n      fn = OCObject\n      break\n  }\n  return fn\n}\n\nfunction zeroValue() {\n  return m('span.grey', '(no value)')\n}\n\nfunction OCBoolean (schema, val) {\n  return val === true ? 'Yes' : (val === false ? 'No' : zeroValue())\n}\n\nfunction getBase64Image (data, type = 'svg') {\n  let ftypes = {\n    svg: 'image/svg+xml',\n    png: 'image/png'\n  }\n  return `data:${ftypes[type]};base64,${data}`\n}\n\nfunction OCString (schema, val, path, root) {\n  if (val === undefined || val === null) {\n    return zeroValue()\n  }\n  let cpath = path[path.length-1]\n  if (schema.media && schema.media.binaryEncoding == 'base64') {\n    return m('div', [\n      m('img', { src: getBase64Image(val, root.type), style: 'max-height: 100px;' }) \n    ])\n  }\n  let out = val\n  if (schema.format === 'url') {\n    out = m('a', { href: val, target: '_blank' }, val)\n  }\n  else if (schema.format === 'date') {\n    out = `${val} (${moment(val).fromNow()})`\n  }\n  else if (schema.format == 'webid') {\n    out = resolveWebId(val, path.slice(-1)[0])\n  }\n  if (cpath === 'contract_address') {\n    if (root.blockchain === 'ethereum') {\n      out = m('a', { href: `https://etherscan.io/address/${val}`, target: '_blank' }, val)\n    }\n  }\n  else if (cpath === 'market_id') {\n    let lnk = null\n    switch (root.platform) {\n      case 'ios':\n        lnk = `http://itunes.apple.com/gb/app/${val}`\n        break\n      case 'android':\n        lnk = `https://play.google.com/store/apps/details?id=${val}`\n        break\n    }\n    if (lnk) {\n      out = m('a', { href: lnk, target: '_blank' }, val)\n    }\n  }\n  return m('div', [\n    out,\n    m('.control', m('a', { href: githubIssueLink(path, val) }, 'Report value'))\n  ])\n}\n\nfunction OCNumber (schema, val) {\n  return val || zeroValue()\n}\n\nfunction OCArray (schema, val, path, root) {\n  if (!val || val.length === 0) {\n    return zeroValue()\n  }\n  let fn = getType(schema.items.type)\n  return val.map((i, c) => {\n    return fn ? fn(schema.items, i, path.concat([c]), root) : null\n  })\n}\n\nfunction OCObject(schema, values, path, root=null) {\n  let wrapper = (out) => out\n  if (schema.patternProperties) {\n    if (values) {\n      schema.properties = []\n      Object.keys(values).forEach(k => {\n        schema.properties[k] = { type: 'string', format: schema['opencrypto-validation'] }\n      })\n    } else {\n      return zeroValue()\n    }\n  }\n  if (!schema.properties) {\n    return m('div', 'bad object')\n  }\n  if (schema.$id && path.length > 0) {\n    wrapper = (res) => {\n      const match = schema.$id.match(/\\/models\\/([^#]+)#?$/)\n      if (!match) {\n        return res\n      }\n      const schemas = {\n        ledger: projectSchema.properties.ledgers.items,\n        asset: projectSchema.properties.assets.items,\n        exchange: projectSchema.properties.exchanges.items,\n        client: projectSchema.properties.clients.items,\n        network: projectSchema.properties.ledgers.items.properties.networks.items,\n        market: projectSchema.properties.exchanges.items.properties.markets.items,\n      }\n      const subschemaId = match[1]\n      const expanded = state.expanded.indexOf(`${match[1]}:${values.id}`) !== -1\n      if (!schemas[subschemaId]) {\n        console.log('not exists: %s', subschemaId)\n      }\n      const [ progress, msgs ] = calculateProgress(schemas[subschemaId], values)\n\n      const content = m('.box.subitem', [\n        m('nav.level', [\n          m('.level-left', [\n            m('.level-item', m('a', { href: `/${subschemaId}/${values.pid || values.id}`, oncreate: m.route.linkTop }, m('b', values.name))),\n            m('.level-item', `[${values.id}]`),\n          ]),\n          m('.level-right', [\n            m('.level-item', [\n              getCounts(values, subschemaId),\n            ]),\n            m('.level-item', { style: 'color: black; width: 10em;' }, [\n              m('span', { style: 'padding-right: 1em; font-size: 0.9em;' }, (progress*100).toFixed(0) + '%'),\n              m('progress.progress.is-primary.is-small', { value: progress, max: 1 }, `${progress}%`) \n            ]),\n            m('.level-item', m('a', { onclick: m.withAttr('value', expandSubschema), value: `${subschemaId}:${values.id}` }, expanded ? 'Collapse' : 'Expand'))\n          ])\n        ]),\n        expanded ? m('div', res) : null\n      ])\n      return content\n    }\n  }\n  return wrapper(m('table.table', m('tbody', Object.keys(schema.properties).map(p => {\n    if (hideEmpty && (values[p] === undefined || values[p] === null)) {\n      return null\n    }\n    const pdata = schema.properties[p]\n    let cpath = path.concat([p])\n    let fn = getType(pdata.type)\n    let events = { 'data-path': makeFooter(cpath, pdata), onmouseenter: m.withAttr('data-path', setPath), onmouseleave: m.withAttr('data-path', unsetPath) }\n    return m('tr', events, [\n      m('th', pdata.title || p),\n      m('td', fn ? fn(pdata, values ? values[p] : null, cpath, values) : 'unknown type: '+pdata.type)\n    ])\n  }))))\n}\n\nfunction githubLinkCommit(commitId) {\n  return `https://github.com/opencrypto-io/data/commit/${commitId}`\n}\n\nfunction githubLink(id, type = 'blob') {\n  return `https://github.com/opencrypto-io/data/${type}/master/db/projects/${id}/project.yaml`\n}\n\nasync function changeBranch(branch) {\n  console.log('Loading branch: %s', branch)\n  data = null\n  dataItem = null\n\n  currentBranch = _.find(branches, { id: branch })\n  ocdx = loadOCD(currentBranch)\n\n  // update webids & metadata\n  webids = await ocdx.query('webids')\n  metadata = await ocdx.query('metadata')\n\n  if (currentBranch.local) {\n    localBranch = metadata.branch\n  }\n  // update list\n  listModelAttr = null\n  // update detail\n  detailId = null\n  m.redraw()\n}\n\nfunction loadLayoutData () {\n  const schemaUrl = window.location.hostname === 'localhost' \n    ? 'http://localhost:1234/data/schema/build/deref/project.json'\n    : 'https://schema.opencrypto.io/build/deref/project.json'\n  Promise.all([\n    m.request(schemaUrl),\n    ocdx.query('webids'),\n    ocdx.query('metadata'),\n  ]).then(out => {\n    projectSchema = out[0]\n    webIds = out[1]\n    metadata = out[2]\n    m.redraw()\n  })\n}\n\nconst Layout = {\n  oninit () {\n    loadLayoutData()\n  },\n  view (vnode) {\n    return m('div', [\n      m('#toolsFooter', { style: { display: currentPath ? 'block' : 'none' }}, currentPath),\n      m('div', { 'style': 'padding-bottom: 5em;' },  [\n        m('nav#navbar.navbar', [\n          m('.container', [\n            m('.navbar-brand', [\n              m('a.navbar-item', { href: 'https://data.opencrypto.io/' }, [\n                m('#logo'),\n                m('#logo-text', [\n                  m('span.thin', 'Open'),\n                  'Crypto',\n                  m('span.green', 'Data'),\n                ])\n              ])\n            ]),\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('a.navbar-item', { href: 'https://data.opencrypto.io' }, 'Homepage'), \n                m('a.navbar-item.current', { href: 'https://explorer.opencrypto.io' }, 'Explorer'), \n                m('a.navbar-item', { href: 'https://schema.opencrypto.io' }, 'Schema'), \n              ]),\n              m('.navbar-end', [\n                m('a.navbar-item', { href: 'https://data.opencrypto.io/#how-to-use-contribute' }, 'How to contribute?'), \n              ])\n            ])\n          ])\n        ]),\n        m('nav#subbar.navbar', [\n          m('.container', [\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('.navbar-item', m('label', [\n                  //m('i.fas.fa-code-branch', { style: 'padding-right: 10px;' }),\n                  'Branch:',\n                ])),\n                m('.navbar-item', [\n                  m('.select.is-rounded', [\n                    m('select', { onchange: m.withAttr('value', changeBranch) }, function () {\n                      return branches.map((b) => m('option', {\n                        selected: currentBranch.id === b.id, value: b.id \n                      }, b.local ? `[local] ${localBranch || b.id}` : b.id))\n                    }())\n                  ])\n                ]),\n                m('.navbar-item', m('label', [\n                  //m('i.fas.fa-code-commit', { style: 'padding-right: 10px;' }),\n                  'Commit:'\n                ])),\n                m('.navbar-item', [\n                  m('.select.is-rounded', [\n                    m('select', [\n                      m('option', 'latest')\n                    ])\n                  ])\n                ])\n              ]),\n              m('.navbar-end', function() {\n                if (!metadata || !metadata.commit) {\n                  return null\n                }\n                let total = null\n                if (metadata.commits_count) {\n                  total = m('.navbar-item', [\n                    '(',\n                    m('a', { href: 'https://github.com/opencrypto-io/data/commits/master' }, '158 commits'),\n                    ')'\n                  ])\n                }\n                return [\n                  m('.navbar-item', [\n                    m('span', { style: 'padding-right: 10px;' }, 'Current commit'),\n                    m('a', { href: githubLinkCommit(metadata.commit) }, m('code', metadata.commit.substring(0,7))),\n                    m('span',{ style: 'padding-left: 10px;'}, '' + moment(metadata.time).fromNow())\n                  ]),\n                  total,\n                  m('a.navbar-item', { onclick: m.withAttr('branch', changeBranch), branch: currentBranch.id }, m('i.fas.fa-sync-alt'))\n                ]\n              }())\n            ])\n          ])\n        ]),\n        m('.container', function() {\n          if (webIds && projectSchema) {\n            return m('#page', vnode.children)\n          }\n          return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n        }())\n      ])\n    ])\n  }\n}\n\nvar originalData = null\nvar projectData = null\nvar data = null\nvar sortBy = 'name'\nvar sortReverse = false\nvar listModel = null\nvar listModelAttr = null\nvar modelData = null\nvar defaultList = 'projects'\n\nfunction loadListData (vnode) {\n  let model = modelData = _.find(models, { collection: vnode.attrs.type || defaultList })\n  if (!modelData) {\n    console.error('no model: %s', model)\n  }\n\n  listModel = model\n  listModelAttr = model.collection\n  ocdx.query(modelData.path).then((res) => {\n    data = res.map(i => processItem(i, model.id))\n    originalData = _.clone(data)\n    m.redraw()\n  })\n}\n\nconst ProjectList = {\n  oninit (vnode) {\n    loadListData(vnode)\n    if (projectData === null) {\n      ocdx.query('projects').then((pd) => {\n        projectData = _.clone(pd)\n        m.redraw()\n      })\n    }\n  },\n  onupdate (vnode) {\n    if (listModelAttr !== (vnode.attrs.type || defaultList)) {\n      loadListData(vnode)\n    }\n  },\n  view () {\n    if (data === null || projectData === null) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n\n    function runSort() {\n      data = _.sortBy(data, sortBy)\n      if (sortReverse) {\n        data = data.reverse()\n      }\n    }\n    function updateSort(value) {\n      if (sortBy != value) {\n        sortBy = value\n      } else {\n        sortReverse = !sortReverse\n      }\n      runSort()\n    }\n\n    function searchList(value) {\n      data = _.clone(originalData)\n      if (!value) {\n        return null\n      }\n      data = data.filter((p) => {\n        return Boolean(p.name.match(new RegExp(value, 'gmi')))\n      })\n    }\n\n    runSort()\n\n    return m('div', [\n      m('nav.level.pageNavBar', [\n        m('.level-left', [\n          m('.level-item', [\n            m('h2.title.is-4', `${modelData.plural} (${originalData.length})`),\n          ]),\n          m('.level-item', [\n            m('input.searchInput', { placeholder: `Search ${modelData.plural.toLowerCase()} ..`, oninput: m.withAttr('value', searchList) }),\n          ])\n        ]),\n        m('.level-right', [\n          m('.level-item', m('.buttons.has-addons', Object.keys(models).map((mid) => {\n            const model = models[mid]\n            var classAttr = null\n            if (modelData.id === model.id) {\n              classAttr = 'is-selected is-info'\n            }\n            return m('span.level-item.button', { \n              href: `/${model.collection}`,\n              oncreate: m.route.linkTop,\n              class: (modelData.id === model.id) ? 'is-selected is-warning' : ''\n            }, model.plural)\n          })))\n        ])\n      ]),\n      m('#projectList', [\n        m('table.table', [\n          m('thead', [\n            m('tr', [\n              modelData.id !== 'project' ? m('th', 'Project') : null,\n              m('th', ''),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: 'name' }, 'Name')),\n              m('th', 'Includes'),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_progress' }, 'Completeness')),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_size' }, 'Data size')),\n              m('th', 'GitHub'),\n              m('th', 'Link to Explorer'),\n            ])\n          ]),\n          m('tbody', function () {\n            return data.map(i => {\n              const detailLink = `/${modelData.id}/${i.pid || i.id}`\n              return m('tr', { key: i.id }, [\n                modelData.id !== 'project' ? \n                  m('td', function () {\n                    if (!i.pid) {\n                      return m('span', 'n/a')\n                    }\n                    const pi = i.pid.split(':')[0]\n                    const par = _.find(projectData, { id: pi })\n                    return m('a', { href: '/project/'+pi, oncreate: m.route.linkTop }, par.name)\n                  }())\n                  : null,\n                m('td.data-logo', m('div', [\n                  i._logo ? m('img', { src: getBase64Image(i._logo, i._logo_type) }) : '',\n                ])),\n                m('td', m('a.projectTitle', { href: detailLink, oncreate: m.route.linkTop }, i.name)),\n                m('td', i._counts),\n                m('td', m('div', [\n                  m('progress.progress.is-primary.is-small', { value: i._progress, max: 1 }, `${i._progress}%`) \n                ])),\n                m('td', (i._size/1000).toFixed(2) + ' KB'),\n                m('td', [\n                  m('a', { href: githubLink(i.id) }, 'Source'),\n                  ', ',\n                  m('a', { href: githubLink(i.id, 'edit') }, 'Edit'),\n                ]),\n                m('td', m('a', { href: detailLink, oncreate: m.route.linkTop }, 'View →' )),\n              ])\n            })\n          }())\n        ])\n      ])\n    ])\n  }\n}\n\nvar dataItem = null\nvar dataView = 'explorer'\nvar dataObject = null\nvar detailId = null\n\nfunction loadItem (vnode) {\n  state.expanded = []\n  const type = vnode.attrs.type\n  let id = vnode.attrs.id \n  if (vnode.attrs.subid) {\n    id = [ id, vnode.attrs.subid ].join(':')\n  }\n  ocdx.get(type, id).then(res => {\n    dataItem = processItem(res, type)\n    detailId = [ vnode.attrs.type, vnode.attrs.id, vnode.attrs.subid ].join('-')  \n    m.redraw()\n  })\n}\n\nconst Project = {\n  oninit (vnode) {\n    loadItem(vnode)\n  },\n  onupdate (vnode) {\n    const id = [ vnode.attrs.type, vnode.attrs.id, vnode.attrs.subid ].join('-') \n    if (detailId !== id) {\n      loadItem(vnode)\n    }\n  },\n  view (vnode) {\n    if (!dataItem) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n    function switchSource (type) {\n      dataView = type\n    }\n    const p = dataItem\n    const model = models[vnode.attrs.type]\n\n    if (!model) {\n      console.log('Model not found: %s', vnode.attrs.type)\n      return null\n    }\n    \n    if (!model.pathx) {\n      model.pathx = ['project']\n    }\n\n    return m('div', [\n      m('nav.level.pageNavBar', [\n        m('.level-left', [\n          m('.level-item', [\n            m('h2.title.is-4', model.pathx.map((mid, i) => {\n              const mod = models[mid]\n              return [ \n                (i > 0) ? m('span', ' → ') : null,\n                '[',\n                m('a', { href: `/${mod.collection}`, oncreate: m.route.linkTop }, mod.id),\n                '] ',\n                m('a', { href: `/${mod.id}/${(mod.pathx && p.pid) ? p.pid.split(':').slice(0,i+1).join(':') : p.id}`, oncreate: m.route.linkTop }, (model.pathx.length > 1) ? (p.pid ? p.pid.split(':')[i] : p.id) : p.id)\n              ]\n            }))\n          ])\n        ])\n      ]),\n      m('#itemDetail', [\n        m('.level', [\n          m('.level-left', [\n            p._logo_full ? m('.navbar-item', m('.itemLogo', m('img', { src: getBase64Image(p._logo_full, p._logo_full_type) }))) : '',\n            m('.navbar-item', m('h3.title.is-4', p.name))\n          ]),\n          m('.level-right', [\n            m('.level-item', p._counts),\n            m('a.level-item', { href: githubLink(p.id, 'edit') }, [\n              m('i.fab.fa-github', { style: 'font-size: 1.3em; padding-right: 0.3em;' }),\n              'Edit on GitHub'\n            ]),\n            m('.level-item', [\n              m('.buttons.has-addons', [\n                m('span.button', { class: dataView === 'explorer' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'explorer' }, 'Explorer'),\n                m('span.button', { class: dataView === 'source' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'source' }, 'Source'),\n              ])\n            ])\n          ])\n        ]),\n        function () {\n          if (dataView === 'source') {\n            const src = JSON.stringify(p, null, 2)\n            return m('#itemSource', [\n              m('pre', m.trust(hljs.highlight('json', src).value))\n            ])\n          }\n          if (projectSchema === null) {\n            return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n          }\n          const schema = model.schemapath ? jmespath.search(projectSchema, model.schemapath) : projectSchema\n          dataObject = OCObject(schema, dataItem, [])\n          return m('#dataTable', dataObject)\n        }()\n      ]),\n    ])\n  }\n}\n\nm.route.linkTop = function() {\n  m.route.link.apply(this, arguments)\n}\n\nm.mount(\n  document.createDocumentFragment(),\n  {\n    view: () => '',\n    onupdate() {\n      const route = m.route.get()\n      if (route != this.route) {\n        scrollTo(0, 0)\n      }\n      this.route = route\n    }\n  }\n)\n\nconst root = document.getElementById('data-explorer')\nm.route(root, '/', {\n  '/': { render: () => m(Layout, m(ProjectList)) },\n  '/:type': { render: (vnode) => m(Layout, m(ProjectList, vnode.attrs)) },\n  '/:type/:id': { render: (vnode) => m(Layout, m(Project, vnode.attrs)) }\n})\n"]}