{"version":3,"sources":["index.js"],"names":["hideEmpty","getLengthInBytes","str","b","match","length","processItem","i","_size","JSON","stringify","_progress","Math","random","_logo","asset0","assets","images","logo_square","data","getType","type","fn","OCString","OCArray","OCNumber","OCBoolean","OCObject","zeroValue","m","schema","val","media","binaryEncoding","src","style","format","href","target","items","map","values","patternProperties","properties","Object","keys","forEach","k","p","pdata","title","githubLink","id","Layout","view","vnode","children","originalData","sortBy","sortReverse","ProjectList","oninit","ocd","query","then","res","_","clone","redraw","runSort","reverse","updateSort","value","searchList","filter","Boolean","name","RegExp","placeholder","oninput","withAttr","onclick","key","oncreate","route","link","tags","join","max","toFixed","dataItem","projectSchema","dataView","Project","get","attrs","request","switchSource","console","log","class","trust","hljs","highlight","root","document","getElementById","render"],"mappings":"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","file":"src.0074a510.map","sourceRoot":"../src","sourcesContent":["\nvar hideEmpty = true\n\nfunction getLengthInBytes(str) {\n  var b = str.match(/[^\\x00-\\xff]/g);\n  return (str.length + (!b ? 0: b.length)); \n}\n\nfunction processItem(i) {\n  i._size = getLengthInBytes(JSON.stringify(i))\n  i._progress = Math.random()\n  i._logo = null\n  var asset0 = i.assets[0]\n  if (asset0.images && asset0.images.logo_square) {\n    i._logo = asset0.images.logo_square.data\n  }\n  return i\n}\n\nfunction getType (type) {\n  let fn = null\n  switch (type) {\n    case 'string':\n      fn = OCString\n      break\n    case 'array':\n      fn = OCArray\n      break\n    case 'number':\n      fn = OCNumber\n      break\n    case 'boolean':\n      fn = OCBoolean\n      break\n    case 'object':\n      fn = OCObject\n      break\n  }\n  return fn\n}\n\nfunction zeroValue() {\n  return m('span.grey', '(no value)')\n}\n\nfunction OCBoolean (schema, val) {\n  return val === true ? 'Yes' : (val === false ? 'No' : zeroValue())\n}\n\nfunction OCString (schema, val) {\n  if (!val) {\n    return zeroValue()\n  }\n  if (schema.media && schema.media.binaryEncoding == 'base64') {\n    return m('div', [\n      m('img', { src: 'data:image/svg+xml;base64,' + val, style: 'max-height: 100px;' }) \n    ])\n  }\n  if (schema.format === 'url') {\n    return m('a', { href: val, target: '_blank' }, val)\n  }\n  return val\n}\n\nfunction OCNumber (schema, val) {\n  return val || zeroValue()\n}\n\nfunction OCArray (schema, val) {\n  if (!val || val.length === 0) {\n    return zeroValue()\n  }\n  let fn = getType(schema.items.type)\n  return val.map(i => {\n    return fn ? fn(schema.items, i) : null\n  })\n}\n\nfunction OCObject(schema, values) {\n  if (schema.patternProperties) {\n    if (values) {\n      schema.properties = []\n      Object.keys(values).forEach(k => {\n        schema.properties[k] = { type: 'string' }\n      })\n    } else {\n      return zeroValue()\n    }\n  }\n  if (!schema.properties) {\n    return m('div', 'bad object')\n  }\n  return m('table.table', m('tbody', Object.keys(schema.properties).map(p => {\n    if (hideEmpty && !values[p]) {\n      return null\n    }\n    const pdata = schema.properties[p]\n    let fn = getType(pdata.type)\n    return m('tr', [\n      m('th', pdata.title || p),\n      m('td', fn ? fn(pdata, values ? values[p] : null) : 'unknown type: '+pdata.type)\n    ])\n  })))\n}\n\nfunction githubLink(id, type = 'blob') {\n  return `https://github.com/opencrypto-io/data/${type}/master/db/projects/${id}/project.yaml`\n}\n\nconst Layout = {\n  view (vnode) {\n    return m('div', { 'style': 'padding-bottom: 5em;' },  [\n      m('nav#navbar.navbar', [\n        m('.container', [\n          m('.navbar-brand', [\n            m('a.navbar-item', { href: 'https://data.opencrypto.io/' }, [\n              m('#logo'),\n              m('#logo-text', [\n                m('span.thin', 'Open'),\n                'Crypto',\n                m('span.green', 'Data'),\n              ])\n            ])\n          ]),\n          m('.navbar-menu', [\n            m('.navbar-start', [\n              m('a.navbar-item', { href: 'https://data.opencrypto.io' }, 'Homepage'), \n              m('a.navbar-item.current', { href: 'https://explorer.opencrypto.io' }, 'Explorer'), \n              m('a.navbar-item', { href: 'https://schema.opencrypto.io' }, 'Schema'), \n            ]),\n            m('.navbar-end', [\n              m('a.navbar-item', { href: '#' }, 'How to contribute?'), \n              m('a.navbar-item', { href: '#' }, 'FAQ'), \n            ])\n          ])\n        ])\n      ]),\n      m('.container', [\n        m('#page', vnode.children)\n      ])\n    ])\n  }\n}\n\nvar originalData = null\nvar data = null\nvar sortBy = 'name'\nvar sortReverse = false\n\nconst ProjectList = {\n  oninit () {\n    ocd.query('projects').then(res => {\n      data = res.map(i => {\n        return processItem(i)\n      })\n      originalData = _.clone(data)\n      m.redraw()\n    })\n  },\n  view () {\n    if (data === null) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n\n    function runSort() {\n      data = _.sortBy(data, sortBy)\n      if (sortReverse) {\n        data = data.reverse()\n      }\n    }\n    function updateSort(value) {\n      if (sortBy != value) {\n        sortBy = value\n      } else {\n        sortReverse = !sortReverse\n      }\n      runSort()\n    }\n\n    function searchList(value) {\n      data = _.clone(originalData)\n      if (!value) {\n        return null\n      }\n      data = data.filter((p) => {\n        return Boolean(p.name.match(new RegExp(value, 'gmi')))\n      })\n    }\n\n    runSort()\n\n    return m('div', [\n      m('.navbar.transparent.listNavBar', [\n        m('.navbar-menu', [\n          m('.navbar-start', [\n            m('.navbar-item', [\n              m('h2.title.is-4', 'Projects ('+originalData.length+')'),\n            ]),\n            m('.navbar-item', [\n              m('input.searchInput', { placeholder: 'Search projects ..', oninput: m.withAttr('value', searchList) }),\n            ])\n          ])\n        ])\n      ]),\n      m('#projectList', [\n        m('table.table', [\n          m('thead', [\n            m('tr', [\n              m('th', ''),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: 'name' }, 'Name')),\n              m('th', 'Project tags'),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_progress' }, 'Completeness')),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_size' }, 'Data size')),\n              m('th', 'GitHub'),\n              m('th', 'Link to Explorer'),\n            ])\n          ]),\n          m('tbody', function () {\n            return data.map(i => {\n              return m('tr', { key: i.id }, [\n                m('td.data-logo', m('div', [\n                  i._logo ? m('img', { src: 'data:image/svg+xml;base64,' + i._logo }) : '',\n                ])),\n                m('td', m('a.projectTitle', { href: '/project/'+i.id, oncreate: m.route.link }, i.name)),\n                m('td', i.tags ? i.tags.join(', ') : ''),\n                m('td', m('div', [\n                  m('progress.progress.is-primary.is-small', { value: i._progress, max: 1 }, `${i._progress}%`) \n                ])),\n                m('td', (i._size/1000).toFixed(2) + ' KB'),\n                m('td', [\n                  m('a', { href: githubLink(i.id) }, 'Source'),\n                  ', ',\n                  m('a', { href: githubLink(i.id, 'edit') }, 'Edit'),\n                ]),\n                m('td', m('a', { href: '/project/'+i.id, oncreate: m.route.link }, 'View →' )),\n              ])\n            })\n          }())\n        ])\n      ])\n    ])\n  }\n}\n\nvar dataItem = null\nvar projectSchema = null\nvar dataView = 'explorer'\n\nconst Project = {\n  oninit (vnode) {\n    ocd.get('project', vnode.attrs.id).then(res => {\n      dataItem = res\n      m.redraw()\n    })\n    if (!projectSchema) {\n      m.request('https://schema.opencrypto.io/build/deref/project.json').then(res => {\n        projectSchema = res\n        m.redraw()\n      })\n    }\n  },\n  view (vnode) {\n    if (!dataItem) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n    const p = processItem(dataItem)\n\n    function switchSource (type) {\n      console.log(type)\n      dataView = type\n    }\n\n    return m('div', [\n      m('h2.title.is-4', [\n        m('a', { href: '/', oncreate: m.route.link }, 'Projects'),\n        ' / ',\n        m('span', p.name)\n      ]),\n      m('#itemDetail', [\n        m('.navbar.transparent', [\n          m('.navbar-menu', [\n            m('.navbar-start', [\n              p._logo ? m('.navbar-item', m('.itemLogo', m('img', { src: 'data:image/svg+xml;base64,' + p._logo }))) : '',\n              m('.navbar-item', m('h3.title.is-4', p.name))\n            ]),\n            m('.navbar-end', [\n              m('a.navbar-item', { href: githubLink(p.id, 'edit') }, [\n                m('i.fab.fa-github', { style: 'font-size: 1.3em; padding-right: 0.3em;' }),\n                'Edit on GitHub'\n              ]),\n              m('.navbar-item', [\n                m('.buttons.has-addons', [\n                  m('span.button', { class: dataView === 'explorer' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'explorer' }, 'Explorer'),\n                  m('span.button', { class: dataView === 'source' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'source' }, 'Source'),\n                ])\n              ])\n            ])\n          ])\n        ]),\n        function () {\n          if (dataView === 'source') {\n            const src = JSON.stringify(p, null, 2)\n            return m('#itemSource', [\n              m('pre', m.trust(hljs.highlight('json', src).value))\n            ])\n          }\n          if (projectSchema === null) {\n            return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n          }\n          return m('#dataTable', OCObject(projectSchema, p))\n        }()\n      ])\n    ])\n  }\n}\n\nconst root = document.getElementById('data-explorer')\nm.route(root, '/', {\n  '/': { render: () => m(Layout, m(ProjectList)) },\n  '/project/:id': { render: (vnode) => m(Layout, m(Project, vnode.attrs)) }\n})\n"]}