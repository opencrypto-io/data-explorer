{"version":3,"sources":["index.js"],"names":["hideEmpty","webIds","path","projectSchema","wcol","wcolif","fixSchema","schema","progressError","msgs","weight","text","undefined","push","makePath","checkWeightIf","calculateProgress","obj","root","w","type","log","ret","test","code","eval","items","arr","map","i","k","concat","prog","_","sum","length","properties","weights","progress","keys","forEach","pd","p","Object","values","getLengthInBytes","str","b","match","githubIssueLink","value","title","encodeURI","dataItem","id","body","setPath","makeFooter","format","reduce","out","v","unsetPath","resolveWebId","val","m","href","url","replace","target","processItem","_size","JSON","stringify","_logo","_logo_full","_progress","n","asset0","assets","images","logo_square","data","logo_full","getType","fn","OCString","OCArray","OCNumber","OCBoolean","OCObject","zeroValue","media","binaryEncoding","src","style","moment","fromNow","slice","c","patternProperties","pdata","cpath","events","onmouseenter","withAttr","onmouseleave","githubLink","Layout","schemaUrl","window","location","hostname","all","ocd","query","request","then","redraw","vnode","children","originalData","sortBy","sortReverse","ProjectList","res","clone","runSort","reverse","updateSort","placeholder","oninput","searchList","filter","Boolean","name","RegExp","onclick","key","oncreate","route","link","tags","join","max","toFixed","dataView","Project","get","attrs","switchSource","class","trust","hljs","highlight","document","getElementById","render"],"mappings":";AAkiBA,IAAA,eAAA,WAAA,OAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,OAAA,YAAA,OAAA,GAAA,OAAA,SAAA,EAAA,GAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,KAAA,GAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yDAAA,GAjiBIA,WAAY,EACZC,OAAS,KACTC,KAAO,KACPC,cAAgB,KAEdC,KAAO,oBACPC,OAAS,uBAEf,SAASC,UAAWC,GACXA,OAAAA,EAgDT,SAASC,cAAcC,EAAMP,GAAMQ,IAAAA,EAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAAGC,EAAKC,UAAAA,OAAAA,QAAAA,IAAAA,UAAAA,GAAAA,UAAAA,QAAAA,EAMzCH,OALFI,EAAAA,KAAK,CAAA,KAAA,EAEFC,KAAAA,SAASZ,GACfQ,OAAAA,IAEKD,EAGT,SAASM,cAAeR,IAGxB,SAASS,kBAAmBT,OAAQU,KAAKf,IAAAA,KAAK,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIO,KAAK,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIS,KAAK,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KAC1DC,EAAI,EAEAZ,OAAAA,OAAOa,MACR,IAAA,SACA,IAAA,SACA,IAAA,UACCb,GAAAA,OAAOH,MAAO,CACZG,GAAAA,OAAOF,QAAS,CACVgB,QAAAA,IAAI,2BAA4BP,SAASZ,MAAOK,OAAOF,SACzDiB,IAAAA,IAAM,SAASC,KAAKC,MACjBC,OAAAA,KAAKD,MADF,CAEVjB,OAAOF,SACL,IAACiB,IAAK,CACJ,EAAA,EACJ,OAGCL,EAAAA,MAAAA,KAA6C,KAARA,IAAcV,OAAOH,MAAQ,EAC7D,IAANe,GACYV,cAAAA,KAAMP,KAAMK,OAAOH,OAGrC,MACG,IAAA,QACCG,GAAAA,OAAOH,OAASG,OAAOmB,MAAO,CAC5BnB,GAAAA,OAAOF,QAAS,CACVgB,QAAAA,IAAI,2BAA4BP,SAASZ,MAAOK,OAAOF,SACzDiB,IAAAA,KAAM,SAASC,KAAKC,MACjBC,OAAAA,KAAKD,MADF,CAEVjB,OAAOF,SACL,IAACiB,KAAK,CACJ,EAAA,EACJ,OAGAL,GAAAA,IAAK,CACHU,IAAAA,IAAMV,IAAIW,IAAI,SAACC,EAAGC,GACHd,IAAAA,EAAAA,kBAAkBT,OAAOmB,MAAOG,EAAG3B,KAAK6B,OAAO,CAACD,IAAKrB,KAAMS,MACrEc,OAFmB,eAAA,EAAA,GAAA,KAIxBC,EAAAA,EAAEC,IAAIP,MAAQA,IAAIQ,OAAS5B,OAAOH,YAExBK,cAAAA,KAAMP,KAAMK,OAAOH,OAC7B,EAAA,EAGR,MACG,IAAA,SACCG,GAAAA,OAAO6B,WAAY,CACjB7B,GAAAA,OAAOH,OAASG,OAAOF,QAAS,CAC1BgB,QAAAA,IAAI,2BAA4BP,SAASZ,MAAOK,OAAOF,SACzDiB,IAAAA,MAAM,SAASC,KAAKC,MACjBC,OAAAA,KAAKD,MADF,CAEVjB,OAAOF,SACL,IAACiB,MAAK,CACJ,EAAA,EACJ,OAGAe,IAAAA,QAAU,GACVC,SAAW,GACRC,OAAAA,KAAKhC,OAAO6B,YAAYI,QAAQ,SAAK,GACtCC,IAAAA,EAAKlC,OAAO6B,WAAWM,GACvBD,GAAAA,EAAGrC,MAAO,CACJsC,QAAAA,GAAKD,EAAGrC,MACCY,IAAAA,EAAAA,kBAAkByB,EAAIxB,IAAIyB,IAAM,GAAIxC,KAAK6B,OAAO,CAACW,IAAKjC,KAAMQ,KAArEe,EAFI,eAAA,EAAA,GAAA,GAGHU,SAAAA,GAAKV,KAGdW,OAAOJ,KAAKF,SAASF,OAAS,IAC5BF,EAAAA,EAAEC,IAAIS,OAAOC,OAAON,WAAaL,EAAEC,IAAIS,OAAOC,OAAOP,WAEjD,IAANlB,GACYV,cAAAA,KAAMP,KAAMK,OAAOH,QAKlC,MAAA,CAAEe,EAAGV,MAGd,SAASoC,iBAAiBC,GACpBC,IAAAA,EAAID,EAAIE,MAAM,iBACVF,OAAAA,EAAIX,QAAWY,EAAOA,EAAEZ,OAAL,GAG7B,SAASc,gBAAiB/C,EAAMgD,GAG8CC,MAAAA,qEAF9DC,UAAcC,IAAAA,SAASC,GAAOxC,KAAAA,SAASZ,IAEqCqD,UADzDL,mBAAAA,EAAjC,KAIF,SAASM,QAASd,GACZ,IAACA,EACI,OAAA,KAEFA,KAAAA,EAGT,SAASe,WAAY9B,EAAKpB,GACjBO,OAAAA,SAASa,GAAO,KAAKpB,EAAOa,MAAMb,EAAOmD,OAAQ,IAAMnD,EAAOmD,OAAS,IAAI,IAGpF,SAAS5C,SAAUa,GACVA,OAAAA,EAAIgC,OAAO,SAACC,EAAKC,GAClB,MAAa,iBAANA,EACFD,EAAM,IAAIC,EAAE,IAEJ,iBAANA,GAAmBA,EAAEb,MAAM,mBAG/BY,EAAM,IAAMC,EAFVD,EAAM,KAAMC,EAAE,OAM3B,SAASC,YACA,KAAA,KAGT,SAASC,aAAaC,EAAK5C,GACrBA,GAAAA,EAAK4B,MAAM,aACNiB,OAAAA,EAAE,IAAK,CAAEC,KAAMF,GAAOA,GAG3B,IADO/D,OAAOmB,GAET,MAAA,IAEH8C,IAAAA,EAAOjE,OAAOmB,GAAM+C,IAAIC,QAAQ,MAAOJ,GACtCC,OAAAA,EAAE,IAAK,CAAEC,KAAF,EAAQG,OAAQ,UAAYL,GAG5C,SAASM,YAAYzC,GACjB0C,EAAAA,MAAQ1B,iBAAiB2B,KAAKC,UAAU5C,IACxC6C,EAAAA,MAAQ,KACRC,EAAAA,WAAa,KACY3D,IAAAA,EAAAA,kBAAkBb,cAAe0B,GAJtC,EAAA,eAAA,EAAA,GAIdS,EAJc,EAAA,GAIJ7B,EAJI,EAAA,GAKdY,QAAAA,IAAIQ,EAAEyB,GAAIhB,EAAUkC,KAAKC,UAAUhE,EAAM,KAAM,IACrDmE,EAAAA,UAAYtC,EACV,IAAA,IAAIuC,EAAI,EAAGA,GAAK,EAAGA,IAAK,CACtBC,IAAAA,EAASjD,EAAEkD,OAAOF,GAClBhD,EAAE6C,OACDI,IACDA,EAAOE,QAAUF,EAAOE,OAAOC,cAC/BP,EAAAA,MAAQI,EAAOE,OAAOC,YAAYC,KAClCP,EAAAA,WAAa9C,EAAE6C,OAEfI,EAAOE,QAAUF,EAAOE,OAAOG,YAC/BR,EAAAA,WAAaG,EAAOE,OAAOG,UAAUD,OAGpCrD,OAAAA,EAGT,SAASuD,QAAShE,GACZiE,IAAAA,EAAK,KACDjE,OAAAA,GACD,IAAA,SACEkE,EAAAA,SACL,MACG,IAAA,QACEC,EAAAA,QACL,MACG,IAAA,SACEC,EAAAA,SACL,MACG,IAAA,UACEC,EAAAA,UACL,MACG,IAAA,SACEC,EAAAA,SAGFL,OAAAA,EAGT,SAASM,YACA1B,OAAAA,EAAE,YAAa,cAGxB,SAASwB,UAAWlF,EAAQyD,GACnBA,OAAQ,IAARA,EAAe,OAAiB,IAARA,EAAgB,KAAO2B,YAGxD,SAASL,SAAU/E,EAAQyD,EAAK9D,GAC1B,IAAC8D,EACI2B,OAAAA,YAELpF,GAAAA,EAAOqF,OAAwC,UAA/BrF,EAAOqF,MAAMC,eACxB5B,OAAAA,EAAE,MAAO,CACdA,EAAE,MAAO,CAAE6B,IAAK,6BAA+B9B,EAAK+B,MAAO,yBAG3DnC,IAAAA,EAAMI,EAUHC,MATe,QAAlB1D,EAAOmD,OACHO,EAAAA,EAAE,IAAK,CAAEC,KAAMF,EAAKK,OAAQ,UAAYL,GAErB,SAAlBzD,EAAOmD,OACLM,EAAAA,EAAQgC,KAAAA,OAAOhC,GAAKiC,UAA7B,IAEwB,SAAjB1F,EAAOmD,SACRK,EAAAA,aAAaC,EAAK9D,EAAKgG,OAAO,GAAG,KAElCjC,EAAE,MAAO,CACdL,EACAK,EAAE,WAAYA,EAAE,IAAK,CAAEC,KAAMjB,gBAAgB/C,EAAM8D,IAAQC,EAAE,oBAIjE,SAASuB,SAAUjF,EAAQyD,GAClBA,OAAAA,GAAO2B,YAGhB,SAASJ,QAAShF,EAAQyD,EAAK9D,GACzB,IAAC8D,GAAsB,IAAfA,EAAI7B,OACPwD,OAAAA,YAELN,IAAAA,EAAKD,QAAQ7E,EAAOmB,MAAMN,MACvB4C,OAAAA,EAAIpC,IAAI,SAACC,EAAGsE,GACVd,OAAAA,EAAKA,EAAG9E,EAAOmB,MAAOG,EAAG3B,EAAK6B,OAAO,CAACoE,KAAO,OAIxD,SAAST,SAASnF,EAAQqC,EAAQ1C,GAC5BK,GAAAA,EAAO6F,kBAAmB,CACxBxD,IAAAA,EAMK+C,OAAAA,YALAvD,EAAAA,WAAa,GACbG,OAAAA,KAAKK,GAAQJ,QAAQ,SAAK,GACxBJ,EAAAA,WAAWN,GAAK,CAAEV,KAAM,SAAUsC,OAAQnD,EAAO,4BAM1D,OAACA,EAAO6B,WAGL6B,EAAE,cAAeA,EAAE,QAAStB,OAAOJ,KAAKhC,EAAO6B,YAAYR,IAAI,SAAK,GACrE5B,GAAAA,YAAc4C,EAAOF,GAChB,OAAA,KAEH2D,IAAAA,EAAQ9F,EAAO6B,WAAWM,GAC5B4D,EAAQpG,EAAK6B,OAAO,CAACW,IACrB2C,EAAKD,QAAQiB,EAAMjF,MACnBmF,EAAS,CAAE,YAAa9C,WAAW6C,EAAOD,GAAQG,aAAcvC,EAAEwC,SAAS,YAAajD,SAAUkD,aAAczC,EAAEwC,SAAS,YAAa3C,YACrIG,OAAAA,EAAE,KAAMsC,EAAQ,CACrBtC,EAAE,KAAMoC,EAAMlD,OAAST,GACvBuB,EAAE,KAAMoB,EAAKA,EAAGgB,EAAOzD,EAASA,EAAOF,GAAK,KAAM4D,GAAS,iBAAiBD,EAAMjF,YAZ7E6C,EAAE,MAAO,cAiBpB,SAAS0C,WAAWrD,GAC8BlC,MAAAA,0CADnB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,QAC8CkC,uBAAAA,EAA3E,gBAGF,IAAMsD,OAAS,CAAA,OACH,WACFC,IAAAA,EAAyC,cAA7BC,OAAOC,SAASC,SAC9B,kDACA,wDACIC,QAAAA,IAAI,CACVC,IAAIC,MAAM,UACVlD,EAAEmD,QAAQP,KACTQ,KAAK,SAAO,GACJzD,OAAAA,EAAI,GACGtD,cAAAA,UAAUsD,EAAI,IAC5B0D,EAAAA,YAXO,KAcPC,SAAAA,GACGtD,OAAAA,EAAE,MAAO,CACd/D,KAAO+D,EAAE,eAAgB/D,MAAQ,GACjC+D,EAAE,MAAO,CAAE,MAAS,wBAA2B,CAC7CA,EAAE,oBAAqB,CACrBA,EAAE,aAAc,CACdA,EAAE,gBAAiB,CACjBA,EAAE,gBAAiB,CAAEC,KAAM,+BAAiC,CAC1DD,EAAE,SACFA,EAAE,aAAc,CACdA,EAAE,YAAa,QACf,SACAA,EAAE,aAAc,cAItBA,EAAE,eAAgB,CAChBA,EAAE,gBAAiB,CACjBA,EAAE,gBAAiB,CAAEC,KAAM,8BAAgC,YAC3DD,EAAE,wBAAyB,CAAEC,KAAM,kCAAoC,YACvED,EAAE,gBAAiB,CAAEC,KAAM,gCAAkC,YAE/DD,EAAE,cAAe,CACfA,EAAE,gBAAiB,CAAEC,KAAM,KAAO,sBAClCD,EAAE,gBAAiB,CAAEC,KAAM,KAAO,eAK1CD,EAAE,aACIhE,QAAUE,cACL8D,EAAE,QAASsD,EAAMC,UAEnBvD,EAAE,MAAO,CAAE8B,MAAO,iBAAmB,qBAOlD0B,aAAe,KACfvC,KAAO,KACPwC,OAAS,OACTC,aAAc,EAEZC,YAAc,CAAA,OACR,WACJT,IAAAA,MAAM,YAAYE,KAAK,SAAO,GACzBQ,KAAAA,EAAIjG,IAAI,SAAK,GACX0C,OAAAA,YAAYzC,KAENI,aAAAA,EAAE6F,MAAM5C,MACrBoC,EAAAA,YAPY,KAUV,WACFpC,GAAS,OAATA,KACKjB,OAAAA,EAAE,MAAO,CAAE8B,MAAO,iBAAmB,cAGrCgC,SAAAA,IACA9F,KAAAA,EAAEyF,OAAOxC,KAAMwC,QAClBC,cACKzC,KAAAA,KAAK8C,WAGPC,SAAAA,EAAW/E,GACdwE,QAAUxE,EACHA,OAAAA,EAEK,aAACyE,YAEjBI,IAeK9D,OAFP8D,IAEO9D,EAAE,MAAO,CACdA,EAAE,iCAAkC,CAClCA,EAAE,eAAgB,CAChBA,EAAE,gBAAiB,CACjBA,EAAE,eAAgB,CAChBA,EAAE,gBAAiB,aAAawD,aAAatF,OAAO,OAEtD8B,EAAE,eAAgB,CAChBA,EAAE,oBAAqB,CAAEiE,YAAa,qBAAsBC,QAASlE,EAAEwC,SAAS,QApBjF2B,SAAWlF,GAEd,GADGjB,KAAAA,EAAE6F,MAAML,eACVvE,EACI,OAAA,KAEFgC,KAAAA,KAAKmD,OAAO,SAAC3F,GACX4F,OAAAA,QAAQ5F,EAAE6F,KAAKvF,MAAM,IAAIwF,OAAOtF,EAAO,uBAmBhDe,EAAE,eAAgB,CAChBA,EAAE,cAAe,CACfA,EAAE,QAAS,CACTA,EAAE,KAAM,CACNA,EAAE,KAAM,IACRA,EAAE,KAAMA,EAAE,IAAK,CAAEwE,QAASxE,EAAEwC,SAAS,QAASwB,GAAa/E,MAAO,QAAU,SAC5Ee,EAAE,KAAM,gBACRA,EAAE,KAAMA,EAAE,IAAK,CAAEwE,QAASxE,EAAEwC,SAAS,QAASwB,GAAa/E,MAAO,aAAe,iBACjFe,EAAE,KAAMA,EAAE,IAAK,CAAEwE,QAASxE,EAAEwC,SAAS,QAASwB,GAAa/E,MAAO,SAAW,cAC7Ee,EAAE,KAAM,UACRA,EAAE,KAAM,wBAGZA,EAAE,QACOiB,KAAKtD,IAAI,SAAK,GACZqC,OAAAA,EAAE,KAAM,CAAEyE,IAAK7G,EAAEyB,IAAM,CAC5BW,EAAE,eAAgBA,EAAE,MAAO,CACzBpC,EAAE6C,MAAQT,EAAE,MAAO,CAAE6B,IAAK,6BAA+BjE,EAAE6C,QAAW,MAExET,EAAE,KAAMA,EAAE,iBAAkB,CAAEC,KAAM,YAAYrC,EAAEyB,GAAIqF,SAAU1E,EAAE2E,MAAMC,MAAQhH,EAAE0G,OAClFtE,EAAE,KAAMpC,EAAEiH,KAAOjH,EAAEiH,KAAKC,KAAK,MAAQ,IACrC9E,EAAE,KAAMA,EAAE,MAAO,CACfA,EAAE,wCAAyC,CAAEf,MAAOrB,EAAE+C,UAAWoE,IAAK,GAAQnH,EAAE+C,UADjE,QAGjBX,EAAE,MAAOpC,EAAE0C,MAAM,KAAM0E,QAAQ,GAAK,OACpChF,EAAE,KAAM,CACNA,EAAE,IAAK,CAAEC,KAAMyC,WAAW9E,EAAEyB,KAAO,UACnC,KACAW,EAAE,IAAK,CAAEC,KAAMyC,WAAW9E,EAAEyB,GAAI,SAAW,UAE7CW,EAAE,KAAMA,EAAE,IAAK,CAAEC,KAAM,YAAYrC,EAAEyB,GAAIqF,SAAU1E,EAAE2E,MAAMC,MAAQ,wBAU/ExF,SAAW,KACX6F,SAAW,WAETC,QAAU,CAAA,OACN5B,SAAAA,GACF6B,IAAAA,IAAI,UAAW7B,EAAM8B,MAAM/F,IAAI+D,KAAK,SAAO,GAClC/C,SAAAA,YAAYuD,GACrBP,EAAAA,YAJQ,KAORC,SAAAA,GACA,IAAClE,SACIY,OAAAA,EAAE,MAAO,CAAE8B,MAAO,iBAAmB,cAGrCuD,SAAAA,EAAclI,GACbC,QAAAA,IAAID,GACDA,SAAAA,EAEPsB,IAAAA,EAAIW,SAEHY,OAAAA,EAAE,MAAO,CACdA,EAAE,gBAAiB,CACjBA,EAAE,IAAK,CAAEC,KAAM,IAAKyE,SAAU1E,EAAE2E,MAAMC,MAAQ,YAC9C,MACA5E,EAAE,OAAQvB,EAAE6F,QAEdtE,EAAE,cAAe,CACfA,EAAE,sBAAuB,CACvBA,EAAE,eAAgB,CAChBA,EAAE,gBAAiB,CACjBvB,EAAEiC,WAAaV,EAAE,eAAgBA,EAAE,YAAaA,EAAE,MAAO,CAAE6B,IAAK,6BAA+BpD,EAAEiC,eAAkB,GACnHV,EAAE,eAAgBA,EAAE,gBAAiBvB,EAAE6F,SAEzCtE,EAAE,cAAe,CACfA,EAAE,gBAAiB,CAAEC,KAAMyC,WAAWjE,EAAEY,GAAI,SAAW,CACrDW,EAAE,kBAAmB,CAAE8B,MAAO,4CAC9B,mBAEF9B,EAAE,eAAgB,CAChBA,EAAE,sBAAuB,CACvBA,EAAE,cAAe,CAAEsF,MAAoB,aAAbL,SAA0B,yBAA2B,GAAIT,QAASxE,EAAEwC,SAAS,QAAS6C,GAAepG,MAAO,YAAc,YACpJe,EAAE,cAAe,CAAEsF,MAAoB,WAAbL,SAAwB,yBAA2B,GAAIT,QAASxE,EAAEwC,SAAS,QAAS6C,GAAepG,MAAO,UAAY,oBAM1J,WACMgG,GAAa,WAAbA,SAAuB,CACnBpD,IAAAA,EAAMtB,KAAKC,UAAU/B,EAAG,KAAM,GAC7BuB,OAAAA,EAAE,cAAe,CACtBA,EAAE,MAAOA,EAAEuF,MAAMC,KAAKC,UAAU,OAAQ5D,GAAK5C,UAG7C/C,OAAkB,OAAlBA,cACK8D,EAAE,MAAO,CAAE8B,MAAO,iBAAmB,cAEvC9B,EAAE,aAAcyB,SAASvF,cAAeuC,EAAG,KAVpD,SAiBFxB,KAAOyI,SAASC,eAAe,iBACrC3F,EAAE2E,MAAM1H,KAAM,IAAK,CACZ,IAAA,CAAE2I,OAAQ,WAAM5F,OAAAA,EAAE2C,OAAQ3C,EAAE2D,gBACjB,eAAA,CAAEiC,OAAQ,SAACtC,GAAUtD,OAAAA,EAAE2C,OAAQ3C,EAAEkF,QAAS5B,EAAM8B","file":"src.cd3556bf.map","sourceRoot":"../src","sourcesContent":["\nvar hideEmpty = true\nvar webIds = null\nvar path = null\nvar projectSchema = null\n\nconst wcol = 'opencrypto-weight'\nconst wcolif = 'opencrypto-weight-if'\n\nfunction fixSchema (schema) {\n  return schema\n\n  schema.properties.name[wcol] = 1\n  schema.properties.start_date[wcol] = 1\n  schema.properties.web[wcol] = 1\n  schema.properties.history[wcol] = 1\n  schema.properties.whitepapers[wcol] = 1\n  schema.properties.contacts[wcol] = 1\n  schema.properties.images[wcol] = 1\n  //schema.properties.images.properties.logo_square[wcol] = 1\n\n  schema.properties.team[wcol] = 1\n  schema.properties.team_url[wcol] = 0.5\n  schema.properties.team.items.properties.name[wcol] = 1\n  schema.properties.team.items.properties.role[wcol] = 1\n  schema.properties.team.items.properties.photo[wcol] = 0.5\n  schema.properties.team.items.properties.webids[wcol] = 1\n\n  schema.properties.assets[wcol] = 1\n  schema.properties.webids[wcol] = 1\n  //schema.properties.assets.items[wcol] = 2\n  schema.properties.assets.items.properties.start_date[wcol] = 1\n  schema.properties.assets.items.properties.type[wcol] = 1\n  schema.properties.assets.items.properties.symbol[wcol] = 1\n  schema.properties.assets.items.properties.name[wcol] = 1\n  schema.properties.assets.items.properties.denominations[wcol] = 1\n  schema.properties.assets.items.properties.token_properties[wcol] = 1\n  schema.properties.assets.items.properties.images[wcol] = 1\n  schema.properties.assets.items.properties.networks[wcol] = 1\n  schema.properties.assets.items.properties.networks[wcolif] = 'root.type === \"blockchain\"'\n\n  let network = schema.properties.assets.items.properties.networks.items\n  network.properties.name[wcol] = 5\n  network.properties.type[wcol] = 5\n  network.properties.proof_type[wcol] = 0.5\n  network.properties.proof_type[wcolif] = 'root.type === \"main\"'\n  network.properties.algorithm[wcol] = 1\n  network.properties.algorithm[wcolif] = 'root.type === \"main\"'\n  network.properties.target_block_time[wcol] = 1\n  network.properties.target_block_time[wcolif] = 'root.type === \"main\"'\n  network.properties.maximum_block_size[wcol] = 1\n  network.properties.maximum_block_size[wcolif] = 'root.type === \"main\"'\n  network.properties.mineable[wcol] = 1\n  network.properties.mineable[wcolif] = 'root.type === \"main\"'\n\n  return schema\n}\n\nfunction progressError(msgs, path, weight=1, text=undefined) {\n  msgs.push({\n    text,\n    path: makePath(path),\n    weight\n  })\n  return msgs\n}\n\nfunction checkWeightIf (schema) {\n}\n\nfunction calculateProgress (schema, obj, path=[], msgs=[], root=null) {\n  let w = 1\n  //console.log(schema.title)\n  switch (schema.type) {\n    case 'string':\n    case 'number':\n    case 'boolean':\n      if (schema[wcol]) {\n        if (schema[wcolif]) {\n          console.log('exception: %s, eval=\"%s\"', makePath(path), schema[wcolif])\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        w = (obj !== undefined && obj !== null && obj !== '') ? schema[wcol] : 0\n        if (w === 0) {\n          progressError(msgs, path, schema[wcol])\n        }\n      }\n      break\n    case 'array':\n      if (schema[wcol] && schema.items) {\n        if (schema[wcolif]) {\n          console.log('exception: %s, eval=\"%s\"', makePath(path), schema[wcolif])\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        if (obj) {\n          let arr = obj.map((i, k) => {\n            const [ prog ] = calculateProgress(schema.items, i, path.concat([k]), msgs, root)\n            return prog\n          })\n          w = _.sum(arr) / (arr.length * schema[wcol])\n        } else {\n          progressError(msgs, path, schema[wcol])\n          w = 0\n        }\n      }\n      break\n    case 'object':\n      if (schema.properties) {\n        if (schema[wcol] && schema[wcolif]) {\n          console.log('exception: %s, eval=\"%s\"', makePath(path), schema[wcolif])\n          const ret = function test(code) {\n            return eval(code)\n          }(schema[wcolif])\n          if (!ret) {\n            w = 1\n            break\n          }\n        }\n        let weights = {}\n        let progress = {}\n        Object.keys(schema.properties).forEach(p => {\n          let pd = schema.properties[p]\n          if (pd[wcol]) {\n            weights[p] = pd[wcol]\n            const [ prog ] = calculateProgress(pd, obj[p] || '', path.concat([p]), msgs, obj)\n            progress[p] = prog\n          }\n        })\n        if (Object.keys(weights).length > 0) {\n          w = _.sum(Object.values(progress)) / _.sum(Object.values(weights))\n        }\n        if (w === 0) {\n          progressError(msgs, path, schema[wcol])\n        }\n      }\n      break\n  }\n  return [ w, msgs ]\n}\n\nfunction getLengthInBytes(str) {\n  var b = str.match(/[^\\x00-\\xff]/g);\n  return (str.length + (!b ? 0: b.length)); \n}\n\nfunction githubIssueLink (path, value) {\n  const title = encodeURI(`(${dataItem.id}) ${makePath(path)}`)\n  const body = `Current value: \\`${value}\\``\n  return `https://github.com/opencrypto-io/data/issues/new?labels=bug&title=${title}&body=${body}`\n}\n\nfunction setPath (p) {\n  if (!p) {\n    return null\n  }\n  path = p\n}\n\nfunction makeFooter (arr, schema) {\n  return makePath(arr) + ' <'+schema.type+(schema.format? ':' + schema.format : '')+'>'\n}\n\nfunction makePath (arr) {\n  return arr.reduce((out, v) => {\n    if (typeof v === 'number') {\n      return out + '['+v+']'\n    }\n    if (typeof v === 'string' && !v.match(/^[a-zA-Z0-9_]+$/)) {\n      return out + '[\\''+v+'\\']'\n    }\n    return out + '.' + v\n  })\n}\n\nfunction unsetPath () {\n  path = null\n}\n\nfunction resolveWebId(val, type) {\n  if (type.match(/^custom\\//)) {\n    return m('a', { href: val }, val)\n  }\n  const wd = webIds[type]\n  if (!wd) {\n    return '#'\n  }\n  const href = webIds[type].url.replace('@id', val)\n  return m('a', { href, target: '_blank' }, val)\n}\n\nfunction processItem(i) {\n  i._size = getLengthInBytes(JSON.stringify(i))\n  i._logo = null\n  i._logo_full = null\n  const [ progress, msgs ] = calculateProgress(projectSchema, i)\n  console.log(i.id, progress, JSON.stringify(msgs, null, 2))\n  i._progress = progress\n  for(let n = 0; n <= 3; n++) {\n    var asset0 = i.assets[n]\n    if (i._logo) continue\n    if (!asset0) continue\n    if (asset0.images && asset0.images.logo_square) {\n      i._logo = asset0.images.logo_square.data\n      i._logo_full = i._logo\n    }\n    if (asset0.images && asset0.images.logo_full) {\n      i._logo_full = asset0.images.logo_full.data\n    }\n  }\n  return i\n}\n\nfunction getType (type) {\n  let fn = null\n  switch (type) {\n    case 'string':\n      fn = OCString\n      break\n    case 'array':\n      fn = OCArray\n      break\n    case 'number':\n      fn = OCNumber\n      break\n    case 'boolean':\n      fn = OCBoolean\n      break\n    case 'object':\n      fn = OCObject\n      break\n  }\n  return fn\n}\n\nfunction zeroValue() {\n  return m('span.grey', '(no value)')\n}\n\nfunction OCBoolean (schema, val) {\n  return val === true ? 'Yes' : (val === false ? 'No' : zeroValue())\n}\n\nfunction OCString (schema, val, path) {\n  if (!val) {\n    return zeroValue()\n  }\n  if (schema.media && schema.media.binaryEncoding == 'base64') {\n    return m('div', [\n      m('img', { src: 'data:image/svg+xml;base64,' + val, style: 'max-height: 100px;' }) \n    ])\n  }\n  let out = val\n  if (schema.format === 'url') {\n    out = m('a', { href: val, target: '_blank' }, val)\n  }\n  else if (schema.format === 'date') {\n    out = `${val} (${moment(val).fromNow()})`\n  }\n  else if (schema.format == 'webid') {\n    out = resolveWebId(val, path.slice(-1)[0])\n  }\n  return m('div', [\n    out,\n    m('.control', m('a', { href: githubIssueLink(path, val) }, m('i.fas.fa-bug')))\n  ])\n}\n\nfunction OCNumber (schema, val) {\n  return val || zeroValue()\n}\n\nfunction OCArray (schema, val, path) {\n  if (!val || val.length === 0) {\n    return zeroValue()\n  }\n  let fn = getType(schema.items.type)\n  return val.map((i, c) => {\n    return fn ? fn(schema.items, i, path.concat([c])) : null\n  })\n}\n\nfunction OCObject(schema, values, path) {\n  if (schema.patternProperties) {\n    if (values) {\n      schema.properties = []\n      Object.keys(values).forEach(k => {\n        schema.properties[k] = { type: 'string', format: schema['opencrypto-validation'] }\n      })\n    } else {\n      return zeroValue()\n    }\n  }\n  if (!schema.properties) {\n    return m('div', 'bad object')\n  }\n  return m('table.table', m('tbody', Object.keys(schema.properties).map(p => {\n    if (hideEmpty && !values[p]) {\n      return null\n    }\n    const pdata = schema.properties[p]\n    let cpath = path.concat([p])\n    let fn = getType(pdata.type)\n    let events = { 'data-path': makeFooter(cpath, pdata), onmouseenter: m.withAttr('data-path', setPath), onmouseleave: m.withAttr('data-path', unsetPath) }\n    return m('tr', events, [\n      m('th', pdata.title || p),\n      m('td', fn ? fn(pdata, values ? values[p] : null, cpath) : 'unknown type: '+pdata.type)\n    ])\n  })))\n}\n\nfunction githubLink(id, type = 'blob') {\n  return `https://github.com/opencrypto-io/data/${type}/master/db/projects/${id}/project.yaml`\n}\n\nconst Layout = {\n  oninit () {\n    const schemaUrl = window.location.hostname === 'localhost' \n      ? 'http://localhost:1234/schema/deref/project.json'\n      : 'https://schema.opencrypto.io/build/deref/project.json'\n    Promise.all([\n      ocd.query('webids'),\n      m.request(schemaUrl)\n    ]).then(out => {\n      webIds = out[0]\n      projectSchema = fixSchema(out[1])\n      m.redraw()\n    })\n  },\n  view (vnode) {\n    return m('div', [\n      path ? m('#toolsFooter', path) : '',\n      m('div', { 'style': 'padding-bottom: 5em;' },  [\n        m('nav#navbar.navbar', [\n          m('.container', [\n            m('.navbar-brand', [\n              m('a.navbar-item', { href: 'https://data.opencrypto.io/' }, [\n                m('#logo'),\n                m('#logo-text', [\n                  m('span.thin', 'Open'),\n                  'Crypto',\n                  m('span.green', 'Data'),\n                ])\n              ])\n            ]),\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('a.navbar-item', { href: 'https://data.opencrypto.io' }, 'Homepage'), \n                m('a.navbar-item.current', { href: 'https://explorer.opencrypto.io' }, 'Explorer'), \n                m('a.navbar-item', { href: 'https://schema.opencrypto.io' }, 'Schema'), \n              ]),\n              m('.navbar-end', [\n                m('a.navbar-item', { href: '#' }, 'How to contribute?'), \n                m('a.navbar-item', { href: '#' }, 'FAQ'), \n              ])\n            ])\n          ])\n        ]),\n        m('.container', function() {\n          if (webIds && projectSchema) {\n            return m('#page', vnode.children)\n          }\n          return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n        }())\n      ])\n    ])\n  }\n}\n\nvar originalData = null\nvar data = null\nvar sortBy = 'name'\nvar sortReverse = false\n\nconst ProjectList = {\n  oninit () {\n    ocd.query('projects').then(res => {\n      data = res.map(i => {\n        return processItem(i)\n      })\n      originalData = _.clone(data)\n      m.redraw()\n    })\n  },\n  view () {\n    if (data === null) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n\n    function runSort() {\n      data = _.sortBy(data, sortBy)\n      if (sortReverse) {\n        data = data.reverse()\n      }\n    }\n    function updateSort(value) {\n      if (sortBy != value) {\n        sortBy = value\n      } else {\n        sortReverse = !sortReverse\n      }\n      runSort()\n    }\n\n    function searchList(value) {\n      data = _.clone(originalData)\n      if (!value) {\n        return null\n      }\n      data = data.filter((p) => {\n        return Boolean(p.name.match(new RegExp(value, 'gmi')))\n      })\n    }\n\n    runSort()\n\n    return m('div', [\n      m('.navbar.transparent.listNavBar', [\n        m('.navbar-menu', [\n          m('.navbar-start', [\n            m('.navbar-item', [\n              m('h2.title.is-4', 'Projects ('+originalData.length+')'),\n            ]),\n            m('.navbar-item', [\n              m('input.searchInput', { placeholder: 'Search projects ..', oninput: m.withAttr('value', searchList) }),\n            ])\n          ])\n        ])\n      ]),\n      m('#projectList', [\n        m('table.table', [\n          m('thead', [\n            m('tr', [\n              m('th', ''),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: 'name' }, 'Name')),\n              m('th', 'Project tags'),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_progress' }, 'Completeness')),\n              m('th', m('a', { onclick: m.withAttr('value', updateSort), value: '_size' }, 'Data size')),\n              m('th', 'GitHub'),\n              m('th', 'Link to Explorer'),\n            ])\n          ]),\n          m('tbody', function () {\n            return data.map(i => {\n              return m('tr', { key: i.id }, [\n                m('td.data-logo', m('div', [\n                  i._logo ? m('img', { src: 'data:image/svg+xml;base64,' + i._logo }) : '',\n                ])),\n                m('td', m('a.projectTitle', { href: '/project/'+i.id, oncreate: m.route.link }, i.name)),\n                m('td', i.tags ? i.tags.join(', ') : ''),\n                m('td', m('div', [\n                  m('progress.progress.is-primary.is-small', { value: i._progress, max: 1 }, `${i._progress}%`) \n                ])),\n                m('td', (i._size/1000).toFixed(2) + ' KB'),\n                m('td', [\n                  m('a', { href: githubLink(i.id) }, 'Source'),\n                  ', ',\n                  m('a', { href: githubLink(i.id, 'edit') }, 'Edit'),\n                ]),\n                m('td', m('a', { href: '/project/'+i.id, oncreate: m.route.link }, 'View →' )),\n              ])\n            })\n          }())\n        ])\n      ])\n    ])\n  }\n}\n\nvar dataItem = null\nvar dataView = 'explorer'\n\nconst Project = {\n  oninit (vnode) {\n    ocd.get('project', vnode.attrs.id).then(res => {\n      dataItem = processItem(res)\n      m.redraw()\n    })\n  },\n  view (vnode) {\n    if (!dataItem) {\n      return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n    }\n\n    function switchSource (type) {\n      console.log(type)\n      dataView = type\n    }\n    const p = dataItem\n\n    return m('div', [\n      m('h2.title.is-4', [\n        m('a', { href: '/', oncreate: m.route.link }, 'Projects'),\n        ' / ',\n        m('span', p.name)\n      ]),\n      m('#itemDetail', [\n        m('.navbar.transparent', [\n          m('.navbar-menu', [\n            m('.navbar-start', [\n              p._logo_full ? m('.navbar-item', m('.itemLogo', m('img', { src: 'data:image/svg+xml;base64,' + p._logo_full }))) : '',\n              m('.navbar-item', m('h3.title.is-4', p.name))\n            ]),\n            m('.navbar-end', [\n              m('a.navbar-item', { href: githubLink(p.id, 'edit') }, [\n                m('i.fab.fa-github', { style: 'font-size: 1.3em; padding-right: 0.3em;' }),\n                'Edit on GitHub'\n              ]),\n              m('.navbar-item', [\n                m('.buttons.has-addons', [\n                  m('span.button', { class: dataView === 'explorer' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'explorer' }, 'Explorer'),\n                  m('span.button', { class: dataView === 'source' ? 'is-success is-selected' : '', onclick: m.withAttr('value', switchSource), value: 'source' }, 'Source'),\n                ])\n              ])\n            ])\n          ])\n        ]),\n        function () {\n          if (dataView === 'source') {\n            const src = JSON.stringify(p, null, 2)\n            return m('#itemSource', [\n              m('pre', m.trust(hljs.highlight('json', src).value))\n            ])\n          }\n          if (projectSchema === null) {\n            return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n          }\n          return m('#dataTable', OCObject(projectSchema, p, []))\n        }()\n      ]),\n    ])\n  }\n}\n\nconst root = document.getElementById('data-explorer')\nm.route(root, '/', {\n  '/': { render: () => m(Layout, m(ProjectList)) },\n  '/project/:id': { render: (vnode) => m(Layout, m(Project, vnode.attrs)) }\n})\n"]}